2025-11-26 21:56:13.001 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 21:56:13.034 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 21:56:13.036 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 21:56:13.053 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 21:56:13.289 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 21:56:13.338 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 21:56:13.340 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 21:56:13.342 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 21:56:13.374 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 21:56:13.375 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 21:56:13.376 +01:00 [INF] Hosting environment: Development
2025-11-26 21:56:13.377 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 21:56:33.011 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/BotIntegrations/generate-widget-token - null null
2025-11-26 21:56:33.011 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24/widget-settings?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g - null null
2025-11-26 21:56:33.048 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:33.048 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:33.055 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/BotIntegrations/generate-widget-token - 204 null null 44.7869ms
2025-11-26 21:56:33.061 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/BotIntegrations/generate-widget-token - application/json 12
2025-11-26 21:56:33.070 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:33.084 +01:00 [INF] HTTP GET /api/Bots/24/widget-settings started - IP: 127.0.0.1
2025-11-26 21:56:33.084 +01:00 [INF] HTTP POST /api/BotIntegrations/generate-widget-token started - IP: 127.0.0.1
2025-11-26 21:56:33.121 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotIntegrationsController.GenerateWidgetToken (Voia.Api)'
2025-11-26 21:56:33.122 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetWidgetSettings (Voia.Api)'
2025-11-26 21:56:33.136 +01:00 [INF] Route matched with {action = "GenerateWidgetToken", controller = "BotIntegrations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GenerateWidgetToken(Voia.Api.Controllers.GenerateWidgetTokenRequest) on controller Voia.Api.Controllers.BotIntegrationsController (Voia.Api).
2025-11-26 21:56:33.136 +01:00 [INF] Route matched with {action = "GetWidgetSettings", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Voia.Api.Models.Bots.WidgetSettingsDto]] GetWidgetSettings(Int32, System.String) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-26 21:56:34.050 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 21:56:34.464 +01:00 [INF] Executed DbCommand (67ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
LIMIT 1
2025-11-26 21:56:34.464 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[@__request_BotId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Bots` AS `b`
    WHERE `b`.`id` = @__request_BotId_0)
2025-11-26 21:56:34.520 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_BotId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`bot_id`, `b`.`completed_at`, `b`.`created_at`, `b`.`meta`, `b`.`phase`, `b`.`updated_at`
FROM `bot_phases` AS `b`
WHERE (`b`.`bot_id` = @__request_BotId_0) AND (`b`.`phase` = 'integration')
LIMIT 1
2025-11-26 21:56:34.573 +01:00 [INF] Executing OkObjectResult, writing value of type 'Voia.Api.Models.Bots.WidgetSettingsDto'.
2025-11-26 21:56:34.585 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetWidgetSettings (Voia.Api) in 1444.7298ms
2025-11-26 21:56:34.587 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetWidgetSettings (Voia.Api)'
2025-11-26 21:56:34.588 +01:00 [INF] HTTP GET /api/Bots/24/widget-settings completed - Status: 200 - Duration: 1505.9245ms
2025-11-26 21:56:34.594 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24/widget-settings?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g - 200 null application/json; charset=utf-8 1584.3358ms
2025-11-26 21:56:34.596 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24 - null null
2025-11-26 21:56:34.599 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:34.601 +01:00 [INF] HTTP GET /api/Bots/24 started - IP: 127.0.0.1
2025-11-26 21:56:34.603 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetBotById (Voia.Api)'
2025-11-26 21:56:34.607 +01:00 [INF] Route matched with {action = "GetBotById", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetBotById(Int32) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-26 21:56:34.715 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='UPDATE' (Size = 100), @p1='2025-11-26T20:56:34.6046148Z' (DbType = DateTime), @p2='Updated BotPhase' (Size = 4000), @p3='18' (Nullable = true), @p4='BotPhase' (Size = 100), @p5='127.0.0.1' (Size = 45), @p6='{"CompletedAt":"2025-11-26T20:56:34.5347213Z","Meta":"{\"source\":\"integration_script\",\"allowedDomain\":\"localhost\"}","UpdatedAt":"2025-11-26T20:56:34.5348004Z"}' (Size = 4000), @p7='{"CompletedAt":"2025-11-24T20:19:56","Meta":"{\"source\": \"integration_script\", \"allowedDomain\": \"localhost\"}","UpdatedAt":"2025-11-24T20:19:56"}' (Size = 4000), @p8='0HNHD5P3T3PI9:00000001' (Size = 50), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p10=NULL (DbType = Int32), @p14='18', @p11='2025-11-26T20:56:34.5347213Z' (Nullable = true) (DbType = DateTime), @p12='{"source":"integration_script","allowedDomain":"localhost"}' (Size = 4000), @p13='2025-11-26T20:56:34.5348004Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();

UPDATE `bot_phases` SET `completed_at` = @p11, `meta` = @p12, `updated_at` = @p13
WHERE `id` = @p14;
SELECT ROW_COUNT();
2025-11-26 21:56:34.719 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
ORDER BY `b`.`id`, `u`.`Id`, `b0`.`id`
LIMIT 1
2025-11-26 21:56:34.739 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType30`4[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 21:56:34.745 +01:00 [INF] Executed action Voia.Api.Controllers.BotIntegrationsController.GenerateWidgetToken (Voia.Api) in 1607.5053ms
2025-11-26 21:56:34.746 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotIntegrationsController.GenerateWidgetToken (Voia.Api)'
2025-11-26 21:56:34.747 +01:00 [INF] HTTP POST /api/BotIntegrations/generate-widget-token completed - Status: 200 - Duration: 1665.0703ms
2025-11-26 21:56:34.748 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/BotIntegrations/generate-widget-token - 200 null application/json; charset=utf-8 1687.5522ms
2025-11-26 21:56:34.783 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b1`.`id`, `b1`.`bot_id`, `b1`.`created_at`, `b1`.`description`, `b1`.`session_name`, `b1`.`updated_at`, `t`.`id`, `t`.`Id0`, `t`.`id1`
FROM (
    SELECT `b`.`id`, `u`.`Id` AS `Id0`, `b0`.`id` AS `id1`
    FROM `Bots` AS `b`
    INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
    LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
    WHERE `b`.`id` = @__id_0
    LIMIT 1
) AS `t`
INNER JOIN `bot_training_sessions` AS `b1` ON `t`.`id` = `b1`.`bot_id`
ORDER BY `t`.`id`, `t`.`Id0`, `t`.`id1`
2025-11-26 21:56:34.793 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType42`14[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType41`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-26 21:56:34.800 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetBotById (Voia.Api) in 191.2938ms
2025-11-26 21:56:34.801 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetBotById (Voia.Api)'
2025-11-26 21:56:34.801 +01:00 [INF] HTTP GET /api/Bots/24 completed - Status: 200 - Duration: 200.0699ms
2025-11-26 21:56:34.802 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24 - 200 null application/json; charset=utf-8 205.9924ms
2025-11-26 21:56:34.806 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/conversations/user-location - null null
2025-11-26 21:56:34.808 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:34.808 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/conversations/user-location - 204 null null 2.3085ms
2025-11-26 21:56:34.809 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/conversations/user-location - null null
2025-11-26 21:56:34.812 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:34.814 +01:00 [INF] HTTP GET /api/conversations/user-location started - IP: 127.0.0.1
2025-11-26 21:56:34.815 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api)'
2025-11-26 21:56:34.818 +01:00 [INF] Route matched with {action = "GetUserLocation", controller = "Conversations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserLocation() on controller Voia.Api.Controllers.ConversationsController (Voia.Api).
2025-11-26 21:56:34.974 +01:00 [INF] GeoLocation Service initialized with GeoLite2 database
2025-11-26 21:56:34.991 +01:00 [INF] Geolocation for IP 190.147.2.0: Country=Colombia (CO), City=Bogot치
2025-11-26 21:56:34.993 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType94`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 21:56:34.995 +01:00 [INF] Executed action Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api) in 175.6026ms
2025-11-26 21:56:34.996 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api)'
2025-11-26 21:56:34.997 +01:00 [INF] HTTP GET /api/conversations/user-location completed - Status: 200 - Duration: 182.9944ms
2025-11-26 21:56:34.998 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/conversations/user-location - 200 null application/json; charset=utf-8 188.5577ms
2025-11-26 21:56:35.000 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24/context - null null
2025-11-26 21:56:35.002 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:35.003 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - null null
2025-11-26 21:56:35.003 +01:00 [INF] HTTP GET /api/Bots/24/context started - IP: 127.0.0.1
2025-11-26 21:56:35.005 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:35.006 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api)'
2025-11-26 21:56:35.006 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location started - IP: 127.0.0.1
2025-11-26 21:56:35.007 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-26 21:56:35.010 +01:00 [INF] Route matched with {action = "GetBotContext", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetBotContext(Int32, System.String) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-26 21:56:35.011 +01:00 [INF] Route matched with {action = "GetByLocation", controller = "BotWelcomeMessages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByLocation(Int32, System.String, System.String, System.String) on controller Voia.Api.Controllers.BotWelcomeMessagesController (Voia.Api).
2025-11-26 21:56:35.031 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__botId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
WHERE `b`.`id` = @__botId_0
LIMIT 1
2025-11-26 21:56:35.034 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
LIMIT 1
2025-11-26 21:56:35.051 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__botId_0='24' (Nullable = true), @__country_1='Colombia' (Size = 4000), @__city_2='Bogot치' (Size = 4000), @__language_3='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__botId_0) AND (`b`.`country` = @__country_1)) AND (`b`.`city` = @__city_2)) AND (`b`.`language` = @__language_3)
LIMIT 1
2025-11-26 21:56:35.058 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__botId_0='24' (Nullable = true), @__country_1='Colombia' (Size = 4000), @__language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__botId_0) AND (`b`.`country` = @__country_1)) AND `b`.`city` IS NULL) AND (`b`.`language` = @__language_2)
LIMIT 1
2025-11-26 21:56:35.064 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__bot_AiModelConfigId_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`id`, `a`.`created_at`, `a`.`frequency_penalty`, `a`.`ia_provider_id`, `a`.`model_name`, `a`.`presence_penalty`, `a`.`temperature`, `b`.`Id`, `b`.`api_endpoint`, `b`.`api_key`, `b`.`created_at`, `b`.`name`, `b`.`Status`, `b`.`updated_at`
FROM `ai_model_configs` AS `a`
INNER JOIN `bot_ia_providers` AS `b` ON `a`.`ia_provider_id` = `b`.`Id`
WHERE `a`.`id` = @__bot_AiModelConfigId_0
LIMIT 1
2025-11-26 21:56:35.064 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_botId_0='24' (Nullable = true), @__adminCountry_1='Colombia' (Size = 4000), @__adminCity_2='Bogot치 D.C.' (Size = 4000), @__8__locals1_language_3='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__8__locals1_botId_0) AND (`b`.`country` = @__adminCountry_1)) AND (`b`.`city` = @__adminCity_2)) AND (`b`.`language` = @__8__locals1_language_3)
LIMIT 1
2025-11-26 21:56:35.071 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_botId_0='24' (Nullable = true), @__adminCountry_1='Colombia' (Size = 4000), @__8__locals1_language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__8__locals1_botId_0) AND (`b`.`country` = @__adminCountry_1)) AND `b`.`city` IS NULL) AND (`b`.`language` = @__8__locals1_language_2)
LIMIT 1
2025-11-26 21:56:35.077 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__country_0='Colombia' (Size = 4000), @__city_1='Bogot치' (Size = 4000), @__language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE ((`b`.`bot_id` IS NULL AND (`b`.`country` = @__country_0)) AND (`b`.`city` = @__city_1)) AND (`b`.`language` = @__language_2)
LIMIT 1
2025-11-26 21:56:35.086 +01:00 [INF] Welcome message for Bot 24: LEVEL 5 - GENERIC EXACT (Colombia/Bogot치)
2025-11-26 21:56:35.087 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`6[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 21:56:35.089 +01:00 [INF] Executed action Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api) in 76.696ms
2025-11-26 21:56:35.090 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-26 21:56:35.091 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location completed - Status: 200 - Duration: 84.6525ms
2025-11-26 21:56:35.092 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - 200 null application/json; charset=utf-8 89.5379ms
2025-11-26 21:56:35.106 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__bot_BotTemplateId_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_template_id`, `b`.`Content`, `b`.`created_at`, `b`.`Role`, `b`.`updated_at`
FROM `bot_template_prompts` AS `b`
WHERE `b`.`bot_template_id` = @__bot_BotTemplateId_0
2025-11-26 21:56:35.137 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`field_name` AS `FieldName`, `b`.`field_type` AS `FieldType`, COALESCE(`b`.`is_required`, FALSE) AS `IsRequired`
FROM `bot_data_capture_fields` AS `b`
WHERE `b`.`bot_id` = @__bot_Id_0
2025-11-26 21:56:35.158 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`bot_id`, `b`.`bot_template_id`, `b`.`content`, `b`.`created_at`, `b`.`role`, `b`.`template_training_session_id`, `b`.`updated_at`
FROM `bot_custom_prompts` AS `b`
WHERE `b`.`bot_id` = @__bot_Id_0
ORDER BY `b`.`id`
2025-11-26 21:56:35.183 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__bot_Id_0='24' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`url`
FROM `training_urls` AS `t`
WHERE `t`.`bot_id` = @__bot_Id_0
2025-11-26 21:56:35.196 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`content`
FROM `training_custom_texts` AS `t`
WHERE `t`.`bot_id` = @__bot_Id_0
2025-11-26 21:56:35.208 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`file_name`
FROM `uploaded_documents` AS `u`
WHERE `u`.`bot_id` = @__bot_Id_0
2025-11-26 21:56:35.213 +01:00 [INF] Start processing HTTP request GET http://localhost:8000/search_vectors?bot_id=24&query=&limit=5
2025-11-26 21:56:35.214 +01:00 [INF] Sending HTTP request GET http://localhost:8000/search_vectors?bot_id=24&query=&limit=5
2025-11-26 21:56:36.270 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Conversations/get-or-create - null null
2025-11-26 21:56:36.272 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:36.272 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Conversations/get-or-create - 204 null null 2.6568ms
2025-11-26 21:56:36.275 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Conversations/get-or-create - application/json 410
2025-11-26 21:56:36.277 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:36.279 +01:00 [INF] HTTP POST /api/Conversations/get-or-create started - IP: 127.0.0.1
2025-11-26 21:56:36.279 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.ConversationsController.CreateOrGetConversation (Voia.Api)'
2025-11-26 21:56:36.283 +01:00 [INF] Route matched with {action = "CreateOrGetConversation", controller = "Conversations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrGetConversation(CreateConversationDto) on controller Voia.Api.Controllers.ConversationsController (Voia.Api).
2025-11-26 21:56:36.312 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__8__locals1_dto_BotId_0='24', @__8__locals1_dto_ClientSecret_1='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDE5MDU5NCwiZXhwIjoxNzk1NzI2NTk0LCJpYXQiOjE3NjQxOTA1OTQsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.jii4Ew1shn_fjNAv6qKtiqZxKtpHI7EtnqT6Lh2wO2w' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`allowed_origins`, `b`.`bot_id`, `b`.`client_secret`, `b`.`created_at`, `b`.`is_active`, `b`.`updated_at`
FROM `bot_api_settings` AS `b`
WHERE ((`b`.`bot_id` = @__8__locals1_dto_BotId_0) AND (`b`.`client_secret` = @__8__locals1_dto_ClientSecret_1)) AND `b`.`is_active`
LIMIT 1
2025-11-26 21:56:36.320 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_dto_BotId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`
FROM `Bots` AS `b`
WHERE (`b`.`id` = @__8__locals1_dto_BotId_0) AND `b`.`is_active`
LIMIT 1
2025-11-26 21:56:36.335 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__ipAddress_0='127.0.0.1' (Size = 4000), @__8__locals1_dto_BrowserFingerprint_1='2ba988196c386530340ae35fa5ad498700a82bc10d9e0e53153bb8de033207a5' (Size = 256), @__8__locals1_dto_BotId_2='24' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`bot_id`, `p`.`browser_fingerprint`, `p`.`city`, `p`.`country`, `p`.`created_at`, `p`.`ip_address`, `p`.`user_agent`
FROM `public_users` AS `p`
WHERE ((`p`.`ip_address` = @__ipAddress_0) AND (`p`.`browser_fingerprint` = @__8__locals1_dto_BrowserFingerprint_1)) AND (`p`.`bot_id` = @__8__locals1_dto_BotId_2)
LIMIT 1
2025-11-26 21:56:36.409 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='False', @p1='False', @p2='24', @p3=NULL (Size = 4000), @p4=NULL (DbType = DateTime), @p5='2025-11-26T20:56:36.3488909Z' (DbType = DateTime), @p6=NULL (DbType = DateTime), @p7='True', @p8=NULL (DbType = DateTime), @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (DbType = DateTime), @p12='2' (Nullable = true), @p13='active' (Nullable = false) (Size = 255), @p14='Widget Chat' (Size = 4000), @p15='2025-11-26T20:56:36.3488283Z' (DbType = DateTime), @p16='3', @p17=NULL (Size = 4000), @p18='CREATE' (Size = 100), @p19='2025-11-26T20:56:36.3920220Z' (DbType = DateTime), @p20='Created new Conversation' (Size = 4000), @p21='-2147482647' (Nullable = true), @p22='Conversation' (Size = 100), @p23='127.0.0.1' (Size = 45), @p24='{"Id":-2147482647,"ActiveMobileSession":false,"Blocked":false,"BotId":24,"BotResponse":null,"ClosedAt":null,"CreatedAt":"2025-11-26T20:56:36.3488909Z","ExpiresAt":null,"IsWithAI":true,"LastActiveAt":null,"LastMessage":null,"MobileDeviceType":null,"MobileJoinedAt":null,"PublicUserId":2,"Status":"active","Title":"Widget Chat","UpdatedAt":"2025-11-26T20:56:36.3488283Z","UserId":3,"UserMessage":null}' (Size = 4000), @p25='' (Size = 4000), @p26='0HNHD5P3T3PI9:00000004' (Size = 50), @p27='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p28=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Conversations` (`active_mobile_session`, `blocked`, `bot_id`, `bot_response`, `closed_at`, `created_at`, `expires_at`, `is_with_ai`, `last_active_at`, `last_message`, `mobile_device_type`, `mobile_joined_at`, `public_user_id`, `status`, `Title`, `updated_at`, `user_id`, `user_message`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Conversations`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-26 21:56:36.415 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 21:56:36.417 +01:00 [INF] Executed action Voia.Api.Controllers.ConversationsController.CreateOrGetConversation (Voia.Api) in 133.4134ms
2025-11-26 21:56:36.418 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.ConversationsController.CreateOrGetConversation (Voia.Api)'
2025-11-26 21:56:36.419 +01:00 [INF] HTTP POST /api/Conversations/get-or-create completed - Status: 200 - Duration: 140.3424ms
2025-11-26 21:56:36.420 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Conversations/get-or-create - 200 null application/json; charset=utf-8 144.7204ms
2025-11-26 21:56:36.424 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/chatHub/negotiate?conversationId=136&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g&negotiateVersion=1 - null null
2025-11-26 21:56:36.426 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:36.426 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/chatHub/negotiate?conversationId=136&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g&negotiateVersion=1 - 204 null null 2.7512ms
2025-11-26 21:56:36.428 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/chatHub/negotiate?conversationId=136&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g&negotiateVersion=1 - null 0
2025-11-26 21:56:36.430 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:36.443 +01:00 [INF] HTTP POST /chatHub/negotiate started - IP: 127.0.0.1
2025-11-26 21:56:36.444 +01:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-11-26 21:56:36.446 +01:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-11-26 21:56:36.447 +01:00 [INF] HTTP POST /chatHub/negotiate completed - Status: 200 - Duration: 4.1017ms
2025-11-26 21:56:36.448 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/chatHub/negotiate?conversationId=136&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g&negotiateVersion=1 - 200 316 application/json 20.2189ms
2025-11-26 21:56:36.451 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/chatHub?conversationId=136&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g&id=anNF_g7xae2-yaTKlRJXXA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g - null null
2025-11-26 21:56:36.452 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:36.453 +01:00 [INF] HTTP GET /chatHub started - IP: 127.0.0.1
2025-11-26 21:56:36.454 +01:00 [INF] Executing endpoint '/chatHub'
2025-11-26 21:56:36.471 +01:00 [INF] SignalR connected: RsmLhaC90E__U34D3_3Ixg user:null
2025-11-26 21:56:36.496 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='136'], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-26 21:56:36.501 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='136', @p0='2025-11-26T20:56:36.4987942Z' (Nullable = true) (DbType = DateTime), @p2='UPDATE' (Size = 100), @p3='2025-11-26T20:56:36.4990417Z' (DbType = DateTime), @p4='Updated Conversation' (Size = 4000), @p5='136' (Nullable = true), @p6='Conversation' (Size = 100), @p7='127.0.0.1' (Size = 45), @p8='{"LastActiveAt":"2025-11-26T20:56:36.4987942Z"}' (Size = 4000), @p9='{"LastActiveAt":null}' (Size = 4000), @p10='0HNHD5P3T3PIC:00000001' (Size = 50), @p11='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p12=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Conversations` SET `last_active_at` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-26 21:56:36.932 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Conversations/history/136 - null null
2025-11-26 21:56:36.934 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:56:36.935 +01:00 [INF] HTTP GET /api/Conversations/history/136 started - IP: 127.0.0.1
2025-11-26 21:56:36.936 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.ConversationsController.GetConversationHistory (Voia.Api)'
2025-11-26 21:56:36.940 +01:00 [INF] Route matched with {action = "GetConversationHistory", controller = "Conversations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversationHistory(Int32) on controller Voia.Api.Controllers.ConversationsController (Voia.Api).
2025-11-26 21:56:36.949 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='136'], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE `c`.`Id` = @__conversationId_0
LIMIT 1
2025-11-26 21:56:36.980 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__conversationId_0='136'], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`bot_id`, `m`.`conversation_id`, `m`.`created_at`, `m`.`file_id`, `m`.`message_text`, `m`.`public_user_id`, `m`.`read`, `m`.`reply_to_message_id`, `m`.`sender`, `m`.`source`, `m`.`status`, `m`.`temp_id`, `m`.`tokens_used`, `m`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `p`.`Id`, `p`.`bot_id`, `p`.`browser_fingerprint`, `p`.`city`, `p`.`country`, `p`.`created_at`, `p`.`ip_address`, `p`.`user_agent`, `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`
FROM `Messages` AS `m`
LEFT JOIN `users` AS `u` ON `m`.`user_id` = `u`.`Id`
LEFT JOIN `public_users` AS `p` ON `m`.`public_user_id` = `p`.`Id`
LEFT JOIN `Bots` AS `b` ON `m`.`bot_id` = `b`.`id`
WHERE `m`.`conversation_id` = @__conversationId_0
ORDER BY `m`.`created_at`
2025-11-26 21:56:37.009 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__conversationId_0='136'], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, CASE
    WHEN `c`.`file_type` IS NOT NULL AND (`c`.`file_type` LIKE 'image%') THEN 'image'
    ELSE 'file'
END AS `Type`, COALESCE(`c`.`uploaded_at`, UTC_TIMESTAMP()) AS `Timestamp`, 'user' AS `FromRole`, `c`.`user_id` AS `FromId`, CASE
    WHEN `u`.`Id` IS NOT NULL THEN `u`.`Name`
    ELSE 'Usuario'
END AS `FromName`, CASE
    WHEN `u`.`Id` IS NOT NULL THEN COALESCE(`u`.`avatar_url`, '')
    ELSE ''
END AS `FromAvatarUrl`, `c`.`file_path` AS `FileUrl`, `c`.`file_name` AS `FileName`, `c`.`file_type` AS `FileType`
FROM `chat_uploaded_files` AS `c`
LEFT JOIN `users` AS `u` ON `c`.`user_id` = `u`.`Id`
WHERE `c`.`conversation_id` = @__conversationId_0
2025-11-26 21:56:37.013 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`3[[<>f__AnonymousType76`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[<>f__AnonymousType74`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType77`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType73`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-26 21:56:37.019 +01:00 [INF] Executed action Voia.Api.Controllers.ConversationsController.GetConversationHistory (Voia.Api) in 77.7462ms
2025-11-26 21:56:37.019 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.ConversationsController.GetConversationHistory (Voia.Api)'
2025-11-26 21:56:37.020 +01:00 [INF] HTTP GET /api/Conversations/history/136 completed - Status: 200 - Duration: 84.6459ms
2025-11-26 21:56:37.021 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Conversations/history/136 - 200 null application/json; charset=utf-8 88.761ms
2025-11-26 21:56:38.086 +01:00 [INF] SignalR disconnected: RsmLhaC90E__U34D3_3Ixg user:null ex:null
2025-11-26 21:56:38.088 +01:00 [INF] Executed endpoint '/chatHub'
2025-11-26 21:56:38.088 +01:00 [INF] HTTP GET /chatHub completed - Status: 101 - Duration: 1634.6901ms
2025-11-26 21:56:38.089 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/chatHub?conversationId=136&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g&id=anNF_g7xae2-yaTKlRJXXA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g - 101 null null 1638.3932ms
2025-11-26 21:56:38.224 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType45`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType46`3[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType47`6[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[Voia.Api.Models.BotStyle, Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType48`4[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType49`1[[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType50`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-26 21:56:38.234 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api) in 3223.5876ms
2025-11-26 21:56:38.235 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api)'
2025-11-26 21:56:38.236 +01:00 [INF] HTTP GET /api/Bots/24/context completed - Status: 200 - Duration: 3232.8645ms
2025-11-26 21:56:38.237 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24/context - 200 null application/json; charset=utf-8 3237.0354ms
2025-11-26 21:58:55.993 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 21:58:55.994 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:58:55.995 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.3677ms
2025-11-26 21:58:55.997 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 52
2025-11-26 21:58:55.999 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:58:56.000 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:58:56.004 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 7.0219ms
2025-11-26 21:59:06.139 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 21:59:06.141 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:06.142 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.4865ms
2025-11-26 21:59:06.144 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 48
2025-11-26 21:59:06.145 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:06.146 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:06.147 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 2.5606ms
2025-11-26 21:59:08.369 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 48
2025-11-26 21:59:08.371 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:08.372 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:08.372 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 2.8343ms
2025-11-26 21:59:32.066 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 21:59:32.068 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:32.069 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.146ms
2025-11-26 21:59:32.071 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 57
2025-11-26 21:59:32.072 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:32.073 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:32.073 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 2.6342ms
2025-11-26 21:59:34.929 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 57
2025-11-26 21:59:34.931 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:34.932 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:34.932 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 3.0128ms
2025-11-26 21:59:43.098 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 21:59:43.099 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:43.100 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.4117ms
2025-11-26 21:59:43.102 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 52
2025-11-26 21:59:43.104 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:43.104 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:43.105 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 2.621ms
2025-11-26 21:59:52.690 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 21:59:52.691 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:52.692 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.2531ms
2025-11-26 21:59:52.694 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 21:59:52.695 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:52.696 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:52.697 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 2.8349ms
2025-11-26 21:59:54.729 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 21:59:54.731 +01:00 [INF] CORS policy execution successful.
2025-11-26 21:59:54.731 +01:00 [WRN] CSRF token faltante en POST /api/Users/login
2025-11-26 21:59:54.732 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 403 null application/json; charset=utf-8 2.7155ms
2025-11-26 22:01:13.358 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-26T20:46:13.3464626Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-26 22:02:08.090 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-26 22:02:08.092 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:02:08.092 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.283ms
2025-11-26 22:02:08.094 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 409
2025-11-26 22:02:08.096 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:02:08.096 +01:00 [WRN] CSRF token faltante en POST /api/Users/register
2025-11-26 22:02:08.097 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 403 null application/json; charset=utf-8 2.746ms
2025-11-26 22:05:08.634 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24 - null null
2025-11-26 22:05:08.634 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - null null
2025-11-26 22:05:08.635 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:08.638 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:08.638 +01:00 [INF] HTTP GET /api/Bots/24 started - IP: 127.0.0.1
2025-11-26 22:05:08.639 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location started - IP: 127.0.0.1
2025-11-26 22:05:08.639 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetBotById (Voia.Api)'
2025-11-26 22:05:08.640 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-26 22:05:08.641 +01:00 [INF] Route matched with {action = "GetBotById", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetBotById(Int32) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-26 22:05:08.641 +01:00 [INF] Route matched with {action = "GetByLocation", controller = "BotWelcomeMessages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByLocation(Int32, System.String, System.String, System.String) on controller Voia.Api.Controllers.BotWelcomeMessagesController (Voia.Api).
2025-11-26 22:05:08.656 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__botId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
WHERE `b`.`id` = @__botId_0
LIMIT 1
2025-11-26 22:05:08.656 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
ORDER BY `b`.`id`, `u`.`Id`, `b0`.`id`
LIMIT 1
2025-11-26 22:05:08.659 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__botId_0='24' (Nullable = true), @__country_1='Colombia' (Size = 4000), @__city_2='Bogot치' (Size = 4000), @__language_3='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__botId_0) AND (`b`.`country` = @__country_1)) AND (`b`.`city` = @__city_2)) AND (`b`.`language` = @__language_3)
LIMIT 1
2025-11-26 22:05:08.660 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b1`.`id`, `b1`.`bot_id`, `b1`.`created_at`, `b1`.`description`, `b1`.`session_name`, `b1`.`updated_at`, `t`.`id`, `t`.`Id0`, `t`.`id1`
FROM (
    SELECT `b`.`id`, `u`.`Id` AS `Id0`, `b0`.`id` AS `id1`
    FROM `Bots` AS `b`
    INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
    LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
    WHERE `b`.`id` = @__id_0
    LIMIT 1
) AS `t`
INNER JOIN `bot_training_sessions` AS `b1` ON `t`.`id` = `b1`.`bot_id`
ORDER BY `t`.`id`, `t`.`Id0`, `t`.`id1`
2025-11-26 22:05:08.661 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__botId_0='24' (Nullable = true), @__country_1='Colombia' (Size = 4000), @__language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__botId_0) AND (`b`.`country` = @__country_1)) AND `b`.`city` IS NULL) AND (`b`.`language` = @__language_2)
LIMIT 1
2025-11-26 22:05:08.662 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType42`14[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType41`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-26 22:05:08.664 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_botId_0='24' (Nullable = true), @__adminCountry_1='Colombia' (Size = 4000), @__adminCity_2='Bogot치 D.C.' (Size = 4000), @__8__locals1_language_3='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__8__locals1_botId_0) AND (`b`.`country` = @__adminCountry_1)) AND (`b`.`city` = @__adminCity_2)) AND (`b`.`language` = @__8__locals1_language_3)
LIMIT 1
2025-11-26 22:05:08.664 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetBotById (Voia.Api) in 22.1936ms
2025-11-26 22:05:08.666 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_botId_0='24' (Nullable = true), @__adminCountry_1='Colombia' (Size = 4000), @__8__locals1_language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__8__locals1_botId_0) AND (`b`.`country` = @__adminCountry_1)) AND `b`.`city` IS NULL) AND (`b`.`language` = @__8__locals1_language_2)
LIMIT 1
2025-11-26 22:05:08.666 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetBotById (Voia.Api)'
2025-11-26 22:05:08.668 +01:00 [INF] HTTP GET /api/Bots/24 completed - Status: 200 - Duration: 29.9704ms
2025-11-26 22:05:08.668 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__country_0='Colombia' (Size = 4000), @__city_1='Bogot치' (Size = 4000), @__language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE ((`b`.`bot_id` IS NULL AND (`b`.`country` = @__country_0)) AND (`b`.`city` = @__city_1)) AND (`b`.`language` = @__language_2)
LIMIT 1
2025-11-26 22:05:08.669 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24 - 200 null application/json; charset=utf-8 35.8427ms
2025-11-26 22:05:08.671 +01:00 [INF] Welcome message for Bot 24: LEVEL 5 - GENERIC EXACT (Colombia/Bogot치)
2025-11-26 22:05:08.673 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`6[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:05:08.674 +01:00 [INF] Executed action Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api) in 31.2263ms
2025-11-26 22:05:08.675 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/conversations/user-location - null null
2025-11-26 22:05:08.675 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-26 22:05:08.677 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:08.677 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location completed - Status: 200 - Duration: 38.5593ms
2025-11-26 22:05:08.678 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/conversations/user-location - 204 null null 2.7107ms
2025-11-26 22:05:08.679 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - 200 null application/json; charset=utf-8 44.5936ms
2025-11-26 22:05:08.679 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/conversations/user-location - null null
2025-11-26 22:05:08.684 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:08.684 +01:00 [INF] HTTP GET /api/conversations/user-location started - IP: 127.0.0.1
2025-11-26 22:05:08.685 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api)'
2025-11-26 22:05:08.687 +01:00 [INF] Route matched with {action = "GetUserLocation", controller = "Conversations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserLocation() on controller Voia.Api.Controllers.ConversationsController (Voia.Api).
2025-11-26 22:05:08.689 +01:00 [INF] Geolocation for IP 190.147.2.0: Country=Colombia (CO), City=Bogot치
2025-11-26 22:05:08.689 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType94`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:05:08.690 +01:00 [INF] Executed action Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api) in 2.7497ms
2025-11-26 22:05:08.691 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api)'
2025-11-26 22:05:08.692 +01:00 [INF] HTTP GET /api/conversations/user-location completed - Status: 200 - Duration: 7.5904ms
2025-11-26 22:05:08.693 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/conversations/user-location - 200 null application/json; charset=utf-8 14.3877ms
2025-11-26 22:05:08.697 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24/context - null null
2025-11-26 22:05:08.698 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - null null
2025-11-26 22:05:08.698 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:08.700 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:08.700 +01:00 [INF] HTTP GET /api/Bots/24/context started - IP: 127.0.0.1
2025-11-26 22:05:08.701 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location started - IP: 127.0.0.1
2025-11-26 22:05:08.702 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api)'
2025-11-26 22:05:08.703 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-26 22:05:08.703 +01:00 [INF] Route matched with {action = "GetBotContext", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetBotContext(Int32, System.String) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-26 22:05:08.704 +01:00 [INF] Route matched with {action = "GetByLocation", controller = "BotWelcomeMessages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByLocation(Int32, System.String, System.String, System.String) on controller Voia.Api.Controllers.BotWelcomeMessagesController (Voia.Api).
2025-11-26 22:05:08.707 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
LIMIT 1
2025-11-26 22:05:08.707 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__botId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`
FROM `Bots` AS `b`
INNER JOIN `users` AS `u` ON `b`.`user_id` = `u`.`Id`
WHERE `b`.`id` = @__botId_0
LIMIT 1
2025-11-26 22:05:08.710 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_AiModelConfigId_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`id`, `a`.`created_at`, `a`.`frequency_penalty`, `a`.`ia_provider_id`, `a`.`model_name`, `a`.`presence_penalty`, `a`.`temperature`, `b`.`Id`, `b`.`api_endpoint`, `b`.`api_key`, `b`.`created_at`, `b`.`name`, `b`.`Status`, `b`.`updated_at`
FROM `ai_model_configs` AS `a`
INNER JOIN `bot_ia_providers` AS `b` ON `a`.`ia_provider_id` = `b`.`Id`
WHERE `a`.`id` = @__bot_AiModelConfigId_0
LIMIT 1
2025-11-26 22:05:08.711 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__botId_0='24' (Nullable = true), @__country_1='Colombia' (Size = 4000), @__city_2='Bogot치' (Size = 4000), @__language_3='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__botId_0) AND (`b`.`country` = @__country_1)) AND (`b`.`city` = @__city_2)) AND (`b`.`language` = @__language_3)
LIMIT 1
2025-11-26 22:05:08.712 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_BotTemplateId_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_template_id`, `b`.`Content`, `b`.`created_at`, `b`.`Role`, `b`.`updated_at`
FROM `bot_template_prompts` AS `b`
WHERE `b`.`bot_template_id` = @__bot_BotTemplateId_0
2025-11-26 22:05:08.713 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__botId_0='24' (Nullable = true), @__country_1='Colombia' (Size = 4000), @__language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__botId_0) AND (`b`.`country` = @__country_1)) AND `b`.`city` IS NULL) AND (`b`.`language` = @__language_2)
LIMIT 1
2025-11-26 22:05:08.715 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`field_name` AS `FieldName`, `b`.`field_type` AS `FieldType`, COALESCE(`b`.`is_required`, FALSE) AS `IsRequired`
FROM `bot_data_capture_fields` AS `b`
WHERE `b`.`bot_id` = @__bot_Id_0
2025-11-26 22:05:08.716 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_botId_0='24' (Nullable = true), @__adminCountry_1='Colombia' (Size = 4000), @__adminCity_2='Bogot치 D.C.' (Size = 4000), @__8__locals1_language_3='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__8__locals1_botId_0) AND (`b`.`country` = @__adminCountry_1)) AND (`b`.`city` = @__adminCity_2)) AND (`b`.`language` = @__8__locals1_language_3)
LIMIT 1
2025-11-26 22:05:08.717 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`bot_id`, `b`.`bot_template_id`, `b`.`content`, `b`.`created_at`, `b`.`role`, `b`.`template_training_session_id`, `b`.`updated_at`
FROM `bot_custom_prompts` AS `b`
WHERE `b`.`bot_id` = @__bot_Id_0
ORDER BY `b`.`id`
2025-11-26 22:05:08.718 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_botId_0='24' (Nullable = true), @__adminCountry_1='Colombia' (Size = 4000), @__8__locals1_language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE (((`b`.`bot_id` = @__8__locals1_botId_0) AND (`b`.`country` = @__adminCountry_1)) AND `b`.`city` IS NULL) AND (`b`.`language` = @__8__locals1_language_2)
LIMIT 1
2025-11-26 22:05:08.720 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_Id_0='24' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`url`
FROM `training_urls` AS `t`
WHERE `t`.`bot_id` = @__bot_Id_0
2025-11-26 22:05:08.721 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__country_0='Colombia' (Size = 4000), @__city_1='Bogot치' (Size = 4000), @__language_2='es' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`Id`, `b`.`bot_id`, `b`.`city`, `b`.`country`, `b`.`created_at`, `b`.`language`, `b`.`message`
FROM `bot_welcome_messages` AS `b`
WHERE ((`b`.`bot_id` IS NULL AND (`b`.`country` = @__country_0)) AND (`b`.`city` = @__city_1)) AND (`b`.`language` = @__language_2)
LIMIT 1
2025-11-26 22:05:08.723 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`content`
FROM `training_custom_texts` AS `t`
WHERE `t`.`bot_id` = @__bot_Id_0
2025-11-26 22:05:08.723 +01:00 [INF] Welcome message for Bot 24: LEVEL 5 - GENERIC EXACT (Colombia/Bogot치)
2025-11-26 22:05:08.725 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`6[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:05:08.725 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bot_Id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`file_name`
FROM `uploaded_documents` AS `u`
WHERE `u`.`bot_id` = @__bot_Id_0
2025-11-26 22:05:08.725 +01:00 [INF] Executed action Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api) in 19.5778ms
2025-11-26 22:05:08.727 +01:00 [INF] Start processing HTTP request GET http://localhost:8000/search_vectors?bot_id=24&query=&limit=5
2025-11-26 22:05:08.727 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-26 22:05:08.728 +01:00 [INF] Sending HTTP request GET http://localhost:8000/search_vectors?bot_id=24&query=&limit=5
2025-11-26 22:05:08.728 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location completed - Status: 200 - Duration: 27.5728ms
2025-11-26 22:05:08.730 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - 200 null application/json; charset=utf-8 32.2937ms
2025-11-26 22:05:11.734 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType45`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType46`3[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType47`6[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[Voia.Api.Models.BotStyle, Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType48`4[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType49`1[[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType50`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-26 22:05:11.735 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api) in 3030.3509ms
2025-11-26 22:05:11.736 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api)'
2025-11-26 22:05:11.737 +01:00 [INF] HTTP GET /api/Bots/24/context completed - Status: 200 - Duration: 3036.309ms
2025-11-26 22:05:11.738 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24/context - 200 null application/json; charset=utf-8 3041.0538ms
2025-11-26 22:05:20.663 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Users/csrf-token - null null
2025-11-26 22:05:20.665 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:20.665 +01:00 [INF] HTTP GET /api/Users/csrf-token started - IP: 127.0.0.1
2025-11-26 22:05:20.666 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-26 22:05:20.667 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-26 22:05:20.668 +01:00 [INF] HTTP GET /api/Users/csrf-token completed - Status: 405 - Duration: 2.24ms
2025-11-26 22:05:20.669 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Users/csrf-token - 405 0 null 5.5399ms
2025-11-26 22:05:59.694 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Users/csrf-token - null null
2025-11-26 22:05:59.696 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:05:59.696 +01:00 [INF] HTTP GET /api/Users/csrf-token started - IP: 127.0.0.1
2025-11-26 22:05:59.697 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-26 22:05:59.698 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-26 22:05:59.698 +01:00 [INF] HTTP GET /api/Users/csrf-token completed - Status: 405 - Duration: 2.2833ms
2025-11-26 22:05:59.700 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Users/csrf-token - 405 0 null 5.7562ms
2025-11-26 22:06:13.365 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-26T20:51:13.3635739Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-26 22:11:13.386 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-26T20:56:13.3824065Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-26 22:13:36.099 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 22:13:36.100 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:13:36.101 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 22:13:36.102 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:13:36.104 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 22:13:36.107 +01:00 [INF] CSRF token generado: izMGNXhepq...
2025-11-26 22:13:36.108 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:13:36.110 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 5.6461ms
2025-11-26 22:13:36.111 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:13:36.112 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 10.6074ms
2025-11-26 22:13:36.113 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 14.3571ms
2025-11-26 22:13:36.141 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 22:13:36.143 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:13:36.143 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.1644ms
2025-11-26 22:13:36.156 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 22:13:36.157 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:13:36.158 +01:00 [INF] CSRF token validado y consumido: izMGNXhepq...
2025-11-26 22:13:36.159 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 22:13:36.160 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:13:36.162 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 22:13:36.190 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 22:13:36.225 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 22:13:36.231 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 67.6736ms
2025-11-26 22:13:36.232 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:13:36.233 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 74.1366ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 22:13:36.250 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 22:13:36.259 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 103.4503ms
2025-11-26 22:14:24.076 +01:00 [INF] Application is shutting down...
2025-11-26 22:14:56.776 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 22:14:56.810 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 22:14:56.811 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 22:14:56.817 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 22:14:56.993 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 22:14:57.011 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 22:14:57.014 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 22:14:57.016 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 22:14:57.043 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 22:14:57.044 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 22:14:57.045 +01:00 [INF] Hosting environment: Development
2025-11-26 22:14:57.045 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 22:15:21.847 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 22:15:21.869 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:15:21.889 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 22:15:21.911 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:15:21.920 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 22:15:22.090 +01:00 [INF] CSRF token generado: tjT16pV45E...
2025-11-26 22:15:22.094 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:15:22.107 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 183.9588ms
2025-11-26 22:15:22.109 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:15:22.110 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 221.8782ms
2025-11-26 22:15:22.112 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 266.2892ms
2025-11-26 22:15:22.141 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 22:15:22.148 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:15:22.149 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 7.7823ms
2025-11-26 22:15:22.151 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 22:15:22.153 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:15:22.156 +01:00 [INF] CSRF token validado y consumido: tjT16pV45E...
2025-11-26 22:15:22.156 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 22:15:22.157 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:15:22.163 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 22:15:22.613 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 22:15:23.044 +01:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 22:15:23.067 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 22:15:23.077 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 912.0339ms
2025-11-26 22:15:23.078 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:15:23.080 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 923.2195ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 22:15:23.093 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 22:15:23.109 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 958.0194ms
2025-11-26 22:18:04.197 +01:00 [INF] Application is shutting down...
2025-11-26 22:20:34.414 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 22:20:34.448 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 22:20:34.449 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 22:20:34.462 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 22:20:34.640 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 22:20:34.657 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 22:20:34.660 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 22:20:34.661 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 22:20:34.688 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 22:20:34.689 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 22:20:34.689 +01:00 [INF] Hosting environment: Development
2025-11-26 22:20:34.690 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 22:20:56.442 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 22:20:56.472 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:20:56.509 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 22:20:56.535 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:20:56.544 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 22:20:56.872 +01:00 [INF] CSRF token generado: X0V3X955+i...
2025-11-26 22:20:56.878 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:20:56.892 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 344.2723ms
2025-11-26 22:20:56.895 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:20:56.896 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 388.5126ms
2025-11-26 22:20:56.899 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 457.9249ms
2025-11-26 22:20:56.926 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 22:20:56.934 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:20:56.935 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 9.4939ms
2025-11-26 22:20:56.938 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 22:20:56.941 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:20:56.944 +01:00 [INF] CSRF token validado y consumido: X0V3X955+i...
2025-11-26 22:20:56.945 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 22:20:56.947 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:20:56.954 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 22:20:57.368 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 22:20:57.756 +01:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 22:20:57.777 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 22:20:57.786 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 830.3522ms
2025-11-26 22:20:57.787 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:20:57.788 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 842.6594ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 22:20:57.806 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 22:20:57.821 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 882.7174ms
2025-11-26 22:21:15.117 +01:00 [INF] Application is shutting down...
2025-11-26 22:25:12.258 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 22:25:12.291 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 22:25:12.293 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 22:25:12.302 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 22:25:12.473 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 22:25:12.490 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 22:25:12.493 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 22:25:12.494 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 22:25:12.522 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 22:25:12.523 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 22:25:12.523 +01:00 [INF] Hosting environment: Development
2025-11-26 22:25:12.524 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 22:25:30.722 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 22:25:30.749 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:25:30.782 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 22:25:30.815 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:25:30.825 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 22:25:31.166 +01:00 [INF] CSRF token generado: dWqWBeBvon...
2025-11-26 22:25:31.170 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:25:31.182 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 354.5798ms
2025-11-26 22:25:31.185 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:25:31.186 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 406.0684ms
2025-11-26 22:25:31.189 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 467.6041ms
2025-11-26 22:25:31.217 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 22:25:31.223 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:25:31.224 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 7.6921ms
2025-11-26 22:25:31.227 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 22:25:31.229 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:25:31.233 +01:00 [INF] CSRF token validado y consumido: dWqWBeBvon...
2025-11-26 22:25:31.233 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 22:25:31.235 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:25:31.240 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 22:25:31.661 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 22:25:32.048 +01:00 [ERR] Failed executing DbCommand (26ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 22:25:32.068 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 22:25:32.076 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 834.5494ms
2025-11-26 22:25:32.077 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:25:32.079 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 845.332ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 22:25:32.098 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 22:25:32.116 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 888.8404ms
2025-11-26 22:26:23.478 +01:00 [INF] Application is shutting down...
2025-11-26 22:55:39.148 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 22:55:39.180 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 22:55:39.182 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 22:55:39.191 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 22:55:39.360 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 22:55:39.377 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 22:55:39.379 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 22:55:39.381 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 22:55:39.408 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 22:55:39.408 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 22:55:39.409 +01:00 [INF] Hosting environment: Development
2025-11-26 22:55:39.409 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 22:58:24.640 +01:00 [INF] Application is shutting down...
2025-11-26 22:58:35.823 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 22:58:35.856 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 22:58:35.857 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 22:58:35.863 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 22:58:36.024 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 22:58:36.042 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 22:58:36.044 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 22:58:36.046 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 22:58:36.071 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 22:58:36.072 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 22:58:36.072 +01:00 [INF] Hosting environment: Development
2025-11-26 22:58:36.073 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 22:59:27.944 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 22:59:27.970 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:59:28.005 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 22:59:28.032 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:59:28.040 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 22:59:28.379 +01:00 [INF] CSRF token generado: /f/9xEZhqS...
2025-11-26 22:59:28.383 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 22:59:28.396 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 352.5915ms
2025-11-26 22:59:28.399 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 22:59:28.400 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 395.8791ms
2025-11-26 22:59:28.403 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 459.8687ms
2025-11-26 22:59:28.429 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 22:59:28.436 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:59:28.437 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 7.2992ms
2025-11-26 22:59:28.439 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 22:59:28.441 +01:00 [INF] CORS policy execution successful.
2025-11-26 22:59:28.444 +01:00 [INF] CSRF token validado y consumido: /f/9xEZhqS...
2025-11-26 22:59:28.444 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 22:59:28.446 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:59:28.452 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 22:59:28.878 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 22:59:29.263 +01:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 22:59:29.290 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 22:59:29.300 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 846.0331ms
2025-11-26 22:59:29.301 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 22:59:29.302 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 857.3984ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 22:59:29.320 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 22:59:29.336 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 897.5201ms
2025-11-26 23:00:07.535 +01:00 [INF] Application is shutting down...
2025-11-26 23:00:18.018 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:00:18.051 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:00:18.052 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:00:18.058 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:00:18.225 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 23:00:18.243 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 23:00:18.245 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 23:00:18.246 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 23:00:18.272 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 23:00:18.273 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 23:00:18.273 +01:00 [INF] Hosting environment: Development
2025-11-26 23:00:18.273 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 23:00:35.097 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 23:00:35.122 +01:00 [INF] CORS policy execution successful.
2025-11-26 23:00:35.148 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 23:00:35.166 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 23:00:35.174 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 23:00:35.340 +01:00 [INF] CSRF token generado: duo1ZLq6Ze...
2025-11-26 23:00:35.345 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 23:00:35.357 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 179.5028ms
2025-11-26 23:00:35.359 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 23:00:35.360 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 213.9881ms
2025-11-26 23:00:35.363 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 266.3884ms
2025-11-26 23:00:35.391 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 23:00:35.401 +01:00 [INF] CORS policy execution successful.
2025-11-26 23:00:35.402 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 10.3154ms
2025-11-26 23:00:35.405 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 23:00:35.407 +01:00 [INF] CORS policy execution successful.
2025-11-26 23:00:35.410 +01:00 [INF] CSRF token validado y consumido: duo1ZLq6Ze...
2025-11-26 23:00:35.411 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 23:00:35.412 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 23:00:35.417 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 23:00:35.843 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 23:00:36.267 +01:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 23:00:36.294 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 23:00:36.305 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 886.1165ms
2025-11-26 23:00:36.306 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 23:00:36.307 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 896.5923ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 23:00:36.322 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 23:00:36.336 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 931.9716ms
2025-11-26 23:02:47.207 +01:00 [INF] Application is shutting down...
2025-11-26 23:06:50.176 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:06:50.208 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:06:50.209 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:06:50.218 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:06:50.386 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 23:06:50.404 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 23:06:50.407 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 23:06:50.409 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 23:06:50.437 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 23:06:50.438 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 23:06:50.438 +01:00 [INF] Hosting environment: Development
2025-11-26 23:06:50.439 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 23:07:21.775 +01:00 [INF] Application is shutting down...
2025-11-26 23:13:19.287 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:13:19.313 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:13:19.315 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:13:19.321 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:13:19.873 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 23:13:20.055 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-26 23:13:20.067 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-26 23:13:20.078 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-26 23:13:20.085 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-11-26 23:13:59.887 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:13:59.921 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:13:59.922 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:13:59.932 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:14:00.111 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-26 23:14:00.129 +01:00 [INF] 游빛 Servicio de conversaciones inactivas iniciado.
2025-11-26 23:14:00.131 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-26 23:14:00.132 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-26 23:14:00.157 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-26 23:14:00.158 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-26 23:14:00.158 +01:00 [INF] Hosting environment: Development
2025-11-26 23:14:00.159 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-26 23:14:13.724 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-26 23:14:13.747 +01:00 [INF] CORS policy execution successful.
2025-11-26 23:14:13.779 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-26 23:14:13.810 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 23:14:13.819 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-26 23:14:14.145 +01:00 [INF] CSRF token generado: WMHL2eF5jq...
2025-11-26 23:14:14.150 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-26 23:14:14.162 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 340.0455ms
2025-11-26 23:14:14.165 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-26 23:14:14.165 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 388.2973ms
2025-11-26 23:14:14.168 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 444.7938ms
2025-11-26 23:14:14.195 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-26 23:14:14.204 +01:00 [INF] CORS policy execution successful.
2025-11-26 23:14:14.206 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 10.1627ms
2025-11-26 23:14:14.208 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 50
2025-11-26 23:14:14.210 +01:00 [INF] CORS policy execution successful.
2025-11-26 23:14:14.214 +01:00 [INF] CSRF token validado y consumido: WMHL2eF5jq...
2025-11-26 23:14:14.214 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-26 23:14:14.216 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 23:14:14.222 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-26 23:14:14.630 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 23:14:15.024 +01:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[@__loginDto_Email_0='emi.1234@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `u`.`Id`, `u`.`AccessFailedCount`, `u`.`address`, `u`.`avatar_url`, `u`.`City`, `u`.`ConcurrencyStamp`, `u`.`Country`, `u`.`created_at`, `u`.`document_number`, `u`.`document_photo_url`, `u`.`document_type_id`, `u`.`Email`, `u`.`EmailConfirmed`, `u`.`IsActive`, `u`.`is_verified`, `u`.`LockoutEnabled`, `u`.`LockoutEnd`, `u`.`Name`, `u`.`NormalizedEmail`, `u`.`NormalizedUserName`, `u`.`PasswordHash`, `u`.`phone`, `u`.`PhoneNumber`, `u`.`PhoneNumberConfirmed`, `u`.`PublicDataToken`, `u`.`role_id`, `u`.`SecurityStamp`, `u`.`Status`, `u`.`TwoFactorEnabled`, `u`.`updated_at`, `u`.`UserName`, `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Description`, `a`.`Name`, `a`.`NormalizedName`
FROM `users` AS `u`
LEFT JOIN `AspNetRoles` AS `a` ON `u`.`role_id` = `a`.`Id`
WHERE `u`.`Email` = @__loginDto_Email_0
ORDER BY `u`.`Id`, `a`.`Id`
LIMIT 1
2025-11-26 23:14:15.044 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Voia.Api.Data.ApplicationDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-26 23:14:15.054 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 829.865ms
2025-11-26 23:14:15.055 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-26 23:14:15.056 +01:00 [ERR] HTTP POST /api/Users/login threw exception after 841.9285ms
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
2025-11-26 23:14:15.076 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'chatbot_platform.aspnetroles' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Voia.Api.Controllers.UsersController.Login(LoginDto loginDto) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Controllers\UsersController.cs:line 545
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Voia.Api.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context, IServiceProvider serviceProvider) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RateLimitingMiddleware.cs:line 66
   at Voia.Api.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\RequestResponseLoggingMiddleware.cs:line 43
   at Voia.Api.Middleware.CorsOriginValidationMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CorsOriginValidationMiddleware.cs:line 82
   at Voia.Api.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\SecurityHeadersMiddleware.cs:line 30
   at Voia.Api.Middleware.CsrfProtectionMiddleware.InvokeAsync(HttpContext context, ICsrfTokenService csrfService) in C:\Users\Puesto 8\Documents\VIA\vo-ia\Middleware\CsrfProtectionMiddleware.cs:line 94
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-26 23:14:15.089 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 500 null text/plain; charset=utf-8 881.5238ms
2025-11-26 23:14:57.791 +01:00 [INF] Application is shutting down...
2025-11-26 23:15:03.051 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:15:03.078 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:15:03.079 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:15:03.084 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:15:03.621 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 23:15:03.796 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-26 23:15:03.813 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-26 23:16:50.551 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:16:50.579 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:16:50.581 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:16:50.586 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:16:51.179 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-26 23:20:01.273 +01:00 [INF]  CORS Configuration Loaded
2025-11-26 23:20:01.300 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-26 23:20:01.301 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-26 23:20:01.306 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-26 23:20:01.838 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
