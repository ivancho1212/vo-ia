2025-11-27 10:29:19.590 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 10:29:19.618 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 10:29:19.620 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 10:29:19.634 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 10:29:20.303 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 10:29:20.527 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 10:29:20.541 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 10:29:20.563 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 10:29:20.571 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-11-27 11:29:18.150 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:29:18.177 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:29:18.178 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:29:18.183 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:29:18.725 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:29:18.908 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:29:18.921 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:29:18.932 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:29:18.940 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-11-27 11:32:28.487 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:32:28.513 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:32:28.515 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:32:28.521 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:32:29.070 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:32:29.267 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:32:29.281 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:32:29.293 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:33:16.576 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:33:16.603 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:33:16.605 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:33:16.610 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:33:17.165 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:33:17.351 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:33:17.368 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:33:50.537 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:33:50.563 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:33:50.564 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:33:50.570 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:33:51.111 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:36:25.314 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:36:25.340 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:36:25.342 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:36:25.347 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:36:25.889 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:36:34.802 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:36:34.828 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:36:34.830 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:36:34.835 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:36:35.378 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:36:35.561 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:36:35.573 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:36:35.584 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:36:35.593 +01:00 [INF] Applying migration '20251127103626_IdentitySchema'.
2025-11-27 11:36:35.656 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20251127103626_IdentitySchema', '8.0.0');
2025-11-27 11:43:08.053 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:43:08.080 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:43:08.081 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:43:08.087 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:43:08.624 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:43:47.130 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:43:47.156 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:43:47.158 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:43:47.163 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:43:47.700 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:43:47.878 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:43:47.891 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:43:47.902 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:43:47.911 +01:00 [INF] Applying migration '20251127104309_IdentitySchema'.
2025-11-27 11:43:47.971 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20251127104309_IdentitySchema', '8.0.0');
2025-11-27 11:53:38.934 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:53:38.961 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:53:38.962 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:53:38.967 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:53:39.524 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:53:40.206 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:53:40.218 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:54:13.636 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:54:13.663 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:54:13.665 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:54:13.670 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:54:14.215 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:54:14.397 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:54:14.410 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:54:14.421 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:55:31.542 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:55:31.567 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:55:31.569 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:55:31.574 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:55:32.112 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:55:42.481 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 11:55:42.507 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 11:55:42.509 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 11:55:42.514 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 11:55:43.055 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 11:55:43.236 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:55:43.248 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 11:55:43.258 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 11:55:43.267 +01:00 [INF] Applying migration '20251127105532_IdentitySchema'.
2025-11-27 11:55:43.330 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20251127105532_IdentitySchema', '8.0.0');
2025-11-27 13:08:20.530 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 13:08:20.556 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 13:08:20.557 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 13:08:20.562 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 13:08:21.119 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:10:27.991 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:10:28.017 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:10:28.019 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:10:28.024 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:10:28.568 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:12:39.502 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:12:39.528 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:12:39.530 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:12:39.535 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:12:40.085 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:14:19.752 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:14:19.779 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:14:19.781 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:14:19.786 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:14:20.368 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:14:20.554 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:14:20.622 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.630 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:14:20.634 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:14:20.642 +01:00 [INF] Applying migration '20251127131240_InitialCreate'.
2025-11-27 14:14:20.757 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:14:20.769 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.782 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_actions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `trigger_phrase` longtext CHARACTER SET utf8mb4 NULL,
    `action_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Payload` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_actions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.795 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_capture_fields` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `field_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `field_type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `is_required` tinyint(1) NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_data_capture_fields` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.807 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_ia_providers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `api_endpoint` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_ia_providers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.819 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_installation_settings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `installation_method` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    `installation_instructions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_installation_settings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.854 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_integrations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `integration_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `framework` longtext CHARACTER SET utf8mb4 NULL,
    `settings_json` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_token_hash` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_integrations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.866 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_phases` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `phase` longtext CHARACTER SET utf8mb4 NOT NULL,
    `completed_at` datetime(6) NULL,
    `meta` json NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_phases` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:14:20.869 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_styles` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `style_template_id` int NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `font_family` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(6),
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    `allow_image_upload` tinyint(1) NOT NULL,
    `allow_file_upload` tinyint(1) NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_styles` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:29:42.386 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:29:42.413 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:29:42.414 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:29:42.420 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:29:42.976 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:29:57.004 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:29:57.032 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:29:57.033 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:29:57.038 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:29:57.614 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:29:57.799 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:29:57.812 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:29:57.823 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:29:57.832 +01:00 [INF] Applying migration '20251127132943_InitialCreate'.
2025-11-27 14:29:57.963 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:29:57.967 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:35.163 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:32:35.190 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:32:35.191 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:32:35.196 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:32:35.743 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:32:35.926 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:32:35.993 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.002 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:32:36.005 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:32:36.014 +01:00 [INF] Applying migration '20251127132943_InitialCreate'.
2025-11-27 14:32:36.129 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:32:36.142 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.154 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_actions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `trigger_phrase` longtext CHARACTER SET utf8mb4 NULL,
    `action_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Payload` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_actions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.167 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_capture_fields` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `field_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `field_type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `is_required` tinyint(1) NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_data_capture_fields` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.179 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_ia_providers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `api_endpoint` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_ia_providers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.190 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_installation_settings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `installation_method` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    `installation_instructions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_installation_settings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.202 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_integrations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `integration_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `framework` longtext CHARACTER SET utf8mb4 NULL,
    `settings_json` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_token_hash` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_integrations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.219 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_phases` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `phase` longtext CHARACTER SET utf8mb4 NOT NULL,
    `completed_at` datetime(6) NULL,
    `meta` json NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_phases` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:32:36.222 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_styles` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `style_template_id` int NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `font_family` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(6),
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    `allow_image_upload` tinyint(1) NOT NULL,
    `allow_file_upload` tinyint(1) NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_styles` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:38:30.927 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:38:30.955 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:38:30.957 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:38:30.964 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:38:31.611 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:38:58.085 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:38:58.117 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:38:58.119 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:38:58.126 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:38:58.761 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:40:00.283 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:40:00.310 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:40:00.311 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:40:00.316 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:40:00.880 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:40:07.748 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:40:07.777 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:40:07.779 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:40:07.784 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:40:08.352 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:40:08.536 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:40:08.604 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.612 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:40:08.616 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:40:08.626 +01:00 [INF] Applying migration '20251127134001_InitialCreate'.
2025-11-27 14:40:08.741 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:40:08.753 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.765 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_actions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `trigger_phrase` longtext CHARACTER SET utf8mb4 NULL,
    `action_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Payload` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_actions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.778 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_capture_fields` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `field_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `field_type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `is_required` tinyint(1) NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_data_capture_fields` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.790 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_ia_providers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `api_endpoint` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_ia_providers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.803 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_installation_settings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `installation_method` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    `installation_instructions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_installation_settings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.815 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_integrations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `integration_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `framework` longtext CHARACTER SET utf8mb4 NULL,
    `settings_json` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_token_hash` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_integrations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.828 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_phases` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `phase` longtext CHARACTER SET utf8mb4 NOT NULL,
    `completed_at` datetime(6) NULL,
    `meta` json NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_phases` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:40:08.831 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_styles` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `style_template_id` int NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `font_family` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(6),
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    `allow_image_upload` tinyint(1) NOT NULL,
    `allow_file_upload` tinyint(1) NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_styles` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:45:57.854 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:45:57.880 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:45:57.881 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:45:57.886 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:45:58.442 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:45:59.153 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:45:59.165 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:46:05.688 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:46:05.715 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:46:05.716 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:46:05.722 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:46:06.274 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:46:13.018 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:46:13.044 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:46:13.046 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:46:13.051 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:46:13.604 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:46:13.788 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:46:13.801 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:46:13.812 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:46:13.821 +01:00 [INF] Applying migration '20251127134606_InitialCreate'.
2025-11-27 14:46:13.953 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:46:13.956 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:51.034 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:46:51.061 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:46:51.063 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:46:51.069 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:46:51.628 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:46:51.811 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:46:51.878 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:51.886 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:46:51.890 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:46:51.899 +01:00 [INF] Applying migration '20251127134606_InitialCreate'.
2025-11-27 14:46:52.015 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:46:52.029 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.041 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_actions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `trigger_phrase` longtext CHARACTER SET utf8mb4 NULL,
    `action_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Payload` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_actions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.054 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_capture_fields` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `field_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `field_type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `is_required` tinyint(1) NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_data_capture_fields` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.067 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_ia_providers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `api_endpoint` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_ia_providers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.079 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_installation_settings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `installation_method` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    `installation_instructions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_installation_settings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.091 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_integrations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `integration_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `framework` longtext CHARACTER SET utf8mb4 NULL,
    `settings_json` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_token_hash` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_integrations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.103 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_phases` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `phase` longtext CHARACTER SET utf8mb4 NOT NULL,
    `completed_at` datetime(6) NULL,
    `meta` json NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_phases` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.117 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_styles` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `style_template_id` int NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `font_family` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(),
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    `allow_image_upload` tinyint(1) NOT NULL,
    `allow_file_upload` tinyint(1) NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_styles` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.129 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `document_types` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Abbreviation` longtext CHARACTER SET utf8mb4 NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_document_types` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.142 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `generated_images` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NULL,
    `prompt` longtext CHARACTER SET utf8mb4 NOT NULL,
    `image_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    CONSTRAINT `PK_generated_images` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.154 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `permissions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_permissions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.169 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Plans` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Price` decimal(10,2) NOT NULL,
    `max_tokens` int NOT NULL,
    `bots_limit` int NULL,
    `file_upload_limit` int NULL,
    `ai_providers` json NULL,
    `custom_styles` tinyint(1) NOT NULL,
    `data_capture_limit` int NULL,
    `analytics_dashboard` tinyint(1) NOT NULL,
    `priority_support` tinyint(1) NOT NULL,
    `integration_api` tinyint(1) NOT NULL,
    `is_active` tinyint(1) NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_Plans` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.183 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RefreshTokens` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Token` longtext CHARACTER SET utf8mb4 NOT NULL,
    `TokenJti` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ExpiryDate` datetime(6) NOT NULL,
    `IsRevoked` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `IpAddress` longtext CHARACTER SET utf8mb4 NULL,
    `UserAgent` longtext CHARACTER SET utf8mb4 NULL,
    `LastUsedAt` datetime(6) NULL,
    CONSTRAINT `PK_RefreshTokens` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.196 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `style_templates` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `font_family` longtext CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_style_templates` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.208 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `support_responses` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ticket_id` int NOT NULL,
    `responder_id` int NULL,
    `Message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NOT NULL,
    CONSTRAINT `PK_support_responses` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.219 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `support_tickets` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `subject` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `status` enum('open','in_progress','closed') CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NOT NULL,
    `updated_at` datetime NULL,
    CONSTRAINT `PK_support_tickets` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.232 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `token_usage_logs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `tokens_used` int NOT NULL,
    `usage_date` datetime(6) NULL,
    CONSTRAINT `PK_token_usage_logs` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.244 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `training_data_sessions` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NULL,
    `data_summary` longtext CHARACTER SET utf8mb4 NULL,
    `data_type` longtext CHARACTER SET utf8mb4 NULL,
    `status` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NULL,
    CONSTRAINT `PK_training_data_sessions` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.258 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `user_bot_relations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `relationship_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `interaction_score` int NULL,
    `last_interaction` datetime NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_user_bot_relations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.317 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `user_preferences` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `interest_id` int NOT NULL,
    CONSTRAINT `PK_user_preferences` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.373 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `vector_embeddings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `knowledge_chunk_id` int NOT NULL,
    `embedding_vector` longblob NOT NULL,
    `provider` varchar(50) CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_vector_embeddings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.400 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` int NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.422 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_submissions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `capture_field_id` int NOT NULL,
    `submission_value` longtext CHARACTER SET utf8mb4 NULL,
    `submitted_at` datetime(6) NULL,
    `user_id` int NULL,
    `submission_session_id` varchar(100) CHARACTER SET utf8mb4 NULL,
    `conversation_id` bigint NULL,
    `capture_intent` longtext CHARACTER SET utf8mb4 NULL,
    `capture_source` longtext CHARACTER SET utf8mb4 NULL,
    `metadata_json` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_data_submissions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_data_submissions_bot_data_capture_fields_capture_field_id` FOREIGN KEY (`capture_field_id`) REFERENCES `bot_data_capture_fields` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.455 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ai_model_configs` (
    `id` int NOT NULL AUTO_INCREMENT,
    `model_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `temperature` decimal(3,2) NULL,
    `frequency_penalty` decimal(3,2) NULL,
    `presence_penalty` decimal(3,2) NULL,
    `created_at` datetime(6) NULL,
    `ia_provider_id` int NOT NULL,
    CONSTRAINT `PK_ai_model_configs` PRIMARY KEY (`id`),
    CONSTRAINT `FK_ai_model_configs_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.493 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Country` longtext CHARACTER SET utf8mb4 NULL,
    `City` longtext CHARACTER SET utf8mb4 NULL,
    `Address` longtext CHARACTER SET utf8mb4 NULL,
    `DocumentNumber` longtext CHARACTER SET utf8mb4 NULL,
    `document_photo_url` longtext CHARACTER SET utf8mb4 NULL,
    `Phone` longtext CHARACTER SET utf8mb4 NULL,
    `DocumentTypeId` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `IsActive` tinyint(1) NOT NULL,
    `IsVerified` tinyint(1) NOT NULL,
    `AvatarUrl` longtext CHARACTER SET utf8mb4 NULL,
    `PublicDataToken` longtext CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `role_id` int NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUsers_AspNetRoles_role_id` FOREIGN KEY (`role_id`) REFERENCES `AspNetRoles` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.523 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `rolepermissions` (
    `RoleId` int NOT NULL,
    `PermissionId` int NOT NULL,
    CONSTRAINT `PK_rolepermissions` PRIMARY KEY (`RoleId`, `PermissionId`),
    CONSTRAINT `FK_rolepermissions_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_rolepermissions_permissions_PermissionId` FOREIGN KEY (`PermissionId`) REFERENCES `permissions` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.555 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_templates` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `ia_provider_id` int NOT NULL,
    `ai_model_config_id` int NOT NULL,
    `default_style_id` int NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_templates` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_templates_ai_model_configs_ai_model_config_id` FOREIGN KEY (`ai_model_config_id`) REFERENCES `ai_model_configs` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_templates_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_templates_bot_styles_default_style_id` FOREIGN KEY (`default_style_id`) REFERENCES `bot_styles` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.613 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `activity_logs` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `action` varchar(100) CHARACTER SET utf8mb4 NULL,
    `entity_type` varchar(100) CHARACTER SET utf8mb4 NULL,
    `entity_id` int NULL,
    `old_values` longtext CHARACTER SET utf8mb4 NULL,
    `new_values` longtext CHARACTER SET utf8mb4 NULL,
    `ip_address` varchar(45) CHARACTER SET utf8mb4 NULL,
    `user_agent` varchar(500) CHARACTER SET utf8mb4 NULL,
    `request_id` varchar(50) CHARACTER SET utf8mb4 NULL,
    `description` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_activity_logs` PRIMARY KEY (`id`),
    CONSTRAINT `FK_activity_logs_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.644 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.680 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` int NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.713 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` int NOT NULL,
    `RoleId` int NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.727 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` int NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.765 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Subscriptions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `plan_id` int NOT NULL,
    `started_at` datetime(6) NULL,
    `expires_at` datetime(6) NULL,
    `Status` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Subscriptions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Subscriptions_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Plans_plan_id` FOREIGN KEY (`plan_id`) REFERENCES `Plans` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.789 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserConsents` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ConsentType` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Granted` tinyint(1) NOT NULL,
    `GrantedAt` datetime(6) NULL,
    CONSTRAINT `PK_UserConsents` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_UserConsents_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.816 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_template_prompts` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_template_id` int NOT NULL,
    `Role` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Content` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_template_prompts` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_template_prompts_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:46:52.822 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Bots` (
    `id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `is_active` tinyint(1) NOT NULL DEFAULT TRUE,
    `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(6),
    `is_deleted` tinyint(1) NOT NULL,
    `is_ready` tinyint(1) NOT NULL,
    `user_id` int NOT NULL,
    `style_id` int NULL,
    `ia_provider_id` int NOT NULL,
    `ai_model_config_id` int NULL,
    `bot_template_id` int NULL,
    CONSTRAINT `PK_Bots` PRIMARY KEY (`id`),
    CONSTRAINT `FK_Bots_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Bots_ai_model_configs_ai_model_config_id` FOREIGN KEY (`ai_model_config_id`) REFERENCES `ai_model_configs` (`id`),
    CONSTRAINT `FK_Bots_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Bots_bot_styles_style_id` FOREIGN KEY (`style_id`) REFERENCES `bot_styles` (`id`),
    CONSTRAINT `FK_Bots_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:35.553 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:47:35.579 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:47:35.580 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:47:35.585 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:47:36.143 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:47:36.845 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:47:36.857 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:47:44.723 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:47:44.748 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:47:44.750 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:47:44.755 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:47:45.310 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:47:55.106 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:47:55.138 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:47:55.139 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:47:55.145 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:47:55.894 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:47:56.132 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:47:56.217 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.226 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:47:56.229 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:47:56.241 +01:00 [INF] Applying migration '20251127134745_InitialCreate'.
2025-11-27 14:47:56.395 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:47:56.408 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.420 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_actions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `trigger_phrase` longtext CHARACTER SET utf8mb4 NULL,
    `action_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Payload` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_actions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.434 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_capture_fields` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `field_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `field_type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `is_required` tinyint(1) NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_data_capture_fields` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.446 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_ia_providers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `api_endpoint` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_ia_providers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.459 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_installation_settings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `installation_method` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    `installation_instructions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_installation_settings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.472 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_integrations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `integration_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `framework` longtext CHARACTER SET utf8mb4 NULL,
    `settings_json` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_token_hash` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_integrations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.484 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_phases` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `phase` longtext CHARACTER SET utf8mb4 NOT NULL,
    `completed_at` datetime(6) NULL,
    `meta` json NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_phases` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.499 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_styles` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `style_template_id` int NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `font_family` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(),
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    `allow_image_upload` tinyint(1) NOT NULL,
    `allow_file_upload` tinyint(1) NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_styles` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.521 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `document_types` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Abbreviation` longtext CHARACTER SET utf8mb4 NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_document_types` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.534 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `generated_images` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NULL,
    `prompt` longtext CHARACTER SET utf8mb4 NOT NULL,
    `image_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    CONSTRAINT `PK_generated_images` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.548 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `permissions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_permissions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.562 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Plans` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Price` decimal(10,2) NOT NULL,
    `max_tokens` int NOT NULL,
    `bots_limit` int NULL,
    `file_upload_limit` int NULL,
    `ai_providers` json NULL,
    `custom_styles` tinyint(1) NOT NULL,
    `data_capture_limit` int NULL,
    `analytics_dashboard` tinyint(1) NOT NULL,
    `priority_support` tinyint(1) NOT NULL,
    `integration_api` tinyint(1) NOT NULL,
    `is_active` tinyint(1) NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_Plans` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.575 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RefreshTokens` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Token` longtext CHARACTER SET utf8mb4 NOT NULL,
    `TokenJti` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ExpiryDate` datetime(6) NOT NULL,
    `IsRevoked` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `IpAddress` longtext CHARACTER SET utf8mb4 NULL,
    `UserAgent` longtext CHARACTER SET utf8mb4 NULL,
    `LastUsedAt` datetime(6) NULL,
    CONSTRAINT `PK_RefreshTokens` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.589 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `style_templates` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `font_family` longtext CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_style_templates` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.601 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `support_responses` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ticket_id` int NOT NULL,
    `responder_id` int NULL,
    `Message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NOT NULL,
    CONSTRAINT `PK_support_responses` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.614 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `support_tickets` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `subject` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `status` enum('open','in_progress','closed') CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NOT NULL,
    `updated_at` datetime NULL,
    CONSTRAINT `PK_support_tickets` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.629 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `token_usage_logs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `tokens_used` int NOT NULL,
    `usage_date` datetime(6) NULL,
    CONSTRAINT `PK_token_usage_logs` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.642 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `training_data_sessions` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NULL,
    `data_summary` longtext CHARACTER SET utf8mb4 NULL,
    `data_type` longtext CHARACTER SET utf8mb4 NULL,
    `status` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NULL,
    CONSTRAINT `PK_training_data_sessions` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.656 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `user_bot_relations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `relationship_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `interaction_score` int NULL,
    `last_interaction` datetime NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_user_bot_relations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.667 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `user_preferences` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `interest_id` int NOT NULL,
    CONSTRAINT `PK_user_preferences` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.681 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `vector_embeddings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `knowledge_chunk_id` int NOT NULL,
    `embedding_vector` longblob NOT NULL,
    `provider` varchar(50) CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_vector_embeddings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.714 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` int NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.746 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_submissions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `capture_field_id` int NOT NULL,
    `submission_value` longtext CHARACTER SET utf8mb4 NULL,
    `submitted_at` datetime(6) NULL,
    `user_id` int NULL,
    `submission_session_id` varchar(100) CHARACTER SET utf8mb4 NULL,
    `conversation_id` bigint NULL,
    `capture_intent` longtext CHARACTER SET utf8mb4 NULL,
    `capture_source` longtext CHARACTER SET utf8mb4 NULL,
    `metadata_json` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_data_submissions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_data_submissions_bot_data_capture_fields_capture_field_id` FOREIGN KEY (`capture_field_id`) REFERENCES `bot_data_capture_fields` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.773 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ai_model_configs` (
    `id` int NOT NULL AUTO_INCREMENT,
    `model_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `temperature` decimal(3,2) NULL,
    `frequency_penalty` decimal(3,2) NULL,
    `presence_penalty` decimal(3,2) NULL,
    `created_at` datetime(6) NULL,
    `ia_provider_id` int NOT NULL,
    CONSTRAINT `PK_ai_model_configs` PRIMARY KEY (`id`),
    CONSTRAINT `FK_ai_model_configs_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.804 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Country` longtext CHARACTER SET utf8mb4 NULL,
    `City` longtext CHARACTER SET utf8mb4 NULL,
    `Address` longtext CHARACTER SET utf8mb4 NULL,
    `DocumentNumber` longtext CHARACTER SET utf8mb4 NULL,
    `document_photo_url` longtext CHARACTER SET utf8mb4 NULL,
    `Phone` longtext CHARACTER SET utf8mb4 NULL,
    `DocumentTypeId` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `IsActive` tinyint(1) NOT NULL,
    `IsVerified` tinyint(1) NOT NULL,
    `AvatarUrl` longtext CHARACTER SET utf8mb4 NULL,
    `PublicDataToken` longtext CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `role_id` int NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUsers_AspNetRoles_role_id` FOREIGN KEY (`role_id`) REFERENCES `AspNetRoles` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.837 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `rolepermissions` (
    `RoleId` int NOT NULL,
    `PermissionId` int NOT NULL,
    CONSTRAINT `PK_rolepermissions` PRIMARY KEY (`RoleId`, `PermissionId`),
    CONSTRAINT `FK_rolepermissions_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_rolepermissions_permissions_PermissionId` FOREIGN KEY (`PermissionId`) REFERENCES `permissions` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.869 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_templates` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `ia_provider_id` int NOT NULL,
    `ai_model_config_id` int NOT NULL,
    `default_style_id` int NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_templates` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_templates_ai_model_configs_ai_model_config_id` FOREIGN KEY (`ai_model_config_id`) REFERENCES `ai_model_configs` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_templates_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_templates_bot_styles_default_style_id` FOREIGN KEY (`default_style_id`) REFERENCES `bot_styles` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.907 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `activity_logs` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `action` varchar(100) CHARACTER SET utf8mb4 NULL,
    `entity_type` varchar(100) CHARACTER SET utf8mb4 NULL,
    `entity_id` int NULL,
    `old_values` longtext CHARACTER SET utf8mb4 NULL,
    `new_values` longtext CHARACTER SET utf8mb4 NULL,
    `ip_address` varchar(45) CHARACTER SET utf8mb4 NULL,
    `user_agent` varchar(500) CHARACTER SET utf8mb4 NULL,
    `request_id` varchar(50) CHARACTER SET utf8mb4 NULL,
    `description` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_activity_logs` PRIMARY KEY (`id`),
    CONSTRAINT `FK_activity_logs_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.932 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.965 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` int NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:56.993 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` int NOT NULL,
    `RoleId` int NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:57.011 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` int NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:57.041 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Subscriptions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `plan_id` int NOT NULL,
    `started_at` datetime(6) NULL,
    `expires_at` datetime(6) NULL,
    `Status` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Subscriptions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Subscriptions_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Plans_plan_id` FOREIGN KEY (`plan_id`) REFERENCES `Plans` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:57.067 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserConsents` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ConsentType` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Granted` tinyint(1) NOT NULL,
    `GrantedAt` datetime(6) NULL,
    CONSTRAINT `PK_UserConsents` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_UserConsents_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:57.096 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_template_prompts` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_template_id` int NOT NULL,
    `Role` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Content` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_template_prompts` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_template_prompts_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:47:57.100 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Bots` (
    `id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `is_active` tinyint(1) NOT NULL DEFAULT TRUE,
    `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(6),
    `is_deleted` tinyint(1) NOT NULL,
    `is_ready` tinyint(1) NOT NULL,
    `user_id` int NOT NULL,
    `style_id` int NULL,
    `ia_provider_id` int NOT NULL,
    `ai_model_config_id` int NULL,
    `bot_template_id` int NULL,
    CONSTRAINT `PK_Bots` PRIMARY KEY (`id`),
    CONSTRAINT `FK_Bots_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Bots_ai_model_configs_ai_model_config_id` FOREIGN KEY (`ai_model_config_id`) REFERENCES `ai_model_configs` (`id`),
    CONSTRAINT `FK_Bots_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Bots_bot_styles_style_id` FOREIGN KEY (`style_id`) REFERENCES `bot_styles` (`id`),
    CONSTRAINT `FK_Bots_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:32.220 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:48:32.246 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:48:32.247 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:48:32.253 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:48:32.804 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:48:33.563 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:48:39.894 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:48:39.924 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:48:39.925 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:48:39.930 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:48:40.506 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:48:50.171 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:48:50.197 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:48:50.199 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:48:50.204 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:48:50.756 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:48:50.940 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:48:51.012 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.020 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='chatbot_platform' AND TABLE_NAME='__EFMigrationsHistory';
2025-11-27 14:48:51.024 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-11-27 14:48:51.033 +01:00 [INF] Applying migration '20251127134841_InitialCreate'.
2025-11-27 14:48:51.151 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-11-27 14:48:51.165 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.178 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_actions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `trigger_phrase` longtext CHARACTER SET utf8mb4 NULL,
    `action_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Payload` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_actions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.190 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_capture_fields` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `field_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `field_type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `is_required` tinyint(1) NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_data_capture_fields` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.203 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_ia_providers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `api_endpoint` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_ia_providers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.214 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_installation_settings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `installation_method` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    `installation_instructions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_installation_settings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.227 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_integrations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `integration_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `framework` longtext CHARACTER SET utf8mb4 NULL,
    `settings_json` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_token_hash` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_bot_integrations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.239 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_phases` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `phase` longtext CHARACTER SET utf8mb4 NOT NULL,
    `completed_at` datetime(6) NULL,
    `meta` json NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_phases` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.253 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_styles` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `style_template_id` int NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `font_family` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(),
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    `allow_image_upload` tinyint(1) NOT NULL,
    `allow_file_upload` tinyint(1) NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_styles` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.265 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `document_types` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Abbreviation` longtext CHARACTER SET utf8mb4 NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_document_types` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.283 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `generated_images` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NULL,
    `prompt` longtext CHARACTER SET utf8mb4 NOT NULL,
    `image_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NULL,
    CONSTRAINT `PK_generated_images` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.293 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `permissions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_permissions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.305 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Plans` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `Price` decimal(10,2) NOT NULL,
    `max_tokens` int NOT NULL,
    `bots_limit` int NULL,
    `file_upload_limit` int NULL,
    `ai_providers` json NULL,
    `custom_styles` tinyint(1) NOT NULL,
    `data_capture_limit` int NULL,
    `analytics_dashboard` tinyint(1) NOT NULL,
    `priority_support` tinyint(1) NOT NULL,
    `integration_api` tinyint(1) NOT NULL,
    `is_active` tinyint(1) NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_Plans` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.318 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RefreshTokens` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Token` longtext CHARACTER SET utf8mb4 NOT NULL,
    `TokenJti` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ExpiryDate` datetime(6) NOT NULL,
    `IsRevoked` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `IpAddress` longtext CHARACTER SET utf8mb4 NULL,
    `UserAgent` longtext CHARACTER SET utf8mb4 NULL,
    `LastUsedAt` datetime(6) NULL,
    CONSTRAINT `PK_RefreshTokens` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.331 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `style_templates` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `theme` longtext CHARACTER SET utf8mb4 NOT NULL,
    `primary_color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `secondary_color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `font_family` longtext CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `position` longtext CHARACTER SET utf8mb4 NOT NULL,
    `custom_css` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    `header_background_color` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_style_templates` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.344 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `support_responses` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ticket_id` int NOT NULL,
    `responder_id` int NULL,
    `Message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NOT NULL,
    CONSTRAINT `PK_support_responses` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.357 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `support_tickets` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `subject` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `status` enum('open','in_progress','closed') CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime NOT NULL,
    `updated_at` datetime NULL,
    CONSTRAINT `PK_support_tickets` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.371 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `token_usage_logs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `tokens_used` int NOT NULL,
    `usage_date` datetime(6) NULL,
    CONSTRAINT `PK_token_usage_logs` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.383 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `training_data_sessions` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NULL,
    `data_summary` longtext CHARACTER SET utf8mb4 NULL,
    `data_type` longtext CHARACTER SET utf8mb4 NULL,
    `status` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NULL,
    CONSTRAINT `PK_training_data_sessions` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.394 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `user_bot_relations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `relationship_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `interaction_score` int NULL,
    `last_interaction` datetime NULL,
    `created_at` datetime NULL,
    CONSTRAINT `PK_user_bot_relations` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.404 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `user_preferences` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `interest_id` int NOT NULL,
    CONSTRAINT `PK_user_preferences` PRIMARY KEY (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.415 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `vector_embeddings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `knowledge_chunk_id` int NOT NULL,
    `embedding_vector` longblob NOT NULL,
    `provider` varchar(50) CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_vector_embeddings` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.435 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` int NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.468 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_data_submissions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `capture_field_id` int NOT NULL,
    `submission_value` longtext CHARACTER SET utf8mb4 NULL,
    `submitted_at` datetime(6) NULL,
    `user_id` int NULL,
    `submission_session_id` varchar(100) CHARACTER SET utf8mb4 NULL,
    `conversation_id` bigint NULL,
    `capture_intent` longtext CHARACTER SET utf8mb4 NULL,
    `capture_source` longtext CHARACTER SET utf8mb4 NULL,
    `metadata_json` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_bot_data_submissions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_data_submissions_bot_data_capture_fields_capture_field_id` FOREIGN KEY (`capture_field_id`) REFERENCES `bot_data_capture_fields` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.493 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ai_model_configs` (
    `id` int NOT NULL AUTO_INCREMENT,
    `model_name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `temperature` decimal(3,2) NULL,
    `frequency_penalty` decimal(3,2) NULL,
    `presence_penalty` decimal(3,2) NULL,
    `created_at` datetime(6) NULL,
    `ia_provider_id` int NOT NULL,
    CONSTRAINT `PK_ai_model_configs` PRIMARY KEY (`id`),
    CONSTRAINT `FK_ai_model_configs_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.531 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Country` longtext CHARACTER SET utf8mb4 NULL,
    `City` longtext CHARACTER SET utf8mb4 NULL,
    `Address` longtext CHARACTER SET utf8mb4 NULL,
    `DocumentNumber` longtext CHARACTER SET utf8mb4 NULL,
    `document_photo_url` longtext CHARACTER SET utf8mb4 NULL,
    `Phone` longtext CHARACTER SET utf8mb4 NULL,
    `DocumentTypeId` int NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `IsActive` tinyint(1) NOT NULL,
    `IsVerified` tinyint(1) NOT NULL,
    `AvatarUrl` longtext CHARACTER SET utf8mb4 NULL,
    `PublicDataToken` longtext CHARACTER SET utf8mb4 NULL,
    `Status` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `role_id` int NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUsers_AspNetRoles_role_id` FOREIGN KEY (`role_id`) REFERENCES `AspNetRoles` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.566 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `rolepermissions` (
    `RoleId` int NOT NULL,
    `PermissionId` int NOT NULL,
    CONSTRAINT `PK_rolepermissions` PRIMARY KEY (`RoleId`, `PermissionId`),
    CONSTRAINT `FK_rolepermissions_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_rolepermissions_permissions_PermissionId` FOREIGN KEY (`PermissionId`) REFERENCES `permissions` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.594 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_templates` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `ia_provider_id` int NOT NULL,
    `ai_model_config_id` int NOT NULL,
    `default_style_id` int NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_templates` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_templates_ai_model_configs_ai_model_config_id` FOREIGN KEY (`ai_model_config_id`) REFERENCES `ai_model_configs` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_templates_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_templates_bot_styles_default_style_id` FOREIGN KEY (`default_style_id`) REFERENCES `bot_styles` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.627 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `activity_logs` (
    `id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NULL,
    `action` varchar(100) CHARACTER SET utf8mb4 NULL,
    `entity_type` varchar(100) CHARACTER SET utf8mb4 NULL,
    `entity_id` int NULL,
    `old_values` longtext CHARACTER SET utf8mb4 NULL,
    `new_values` longtext CHARACTER SET utf8mb4 NULL,
    `ip_address` varchar(45) CHARACTER SET utf8mb4 NULL,
    `user_agent` varchar(500) CHARACTER SET utf8mb4 NULL,
    `request_id` varchar(50) CHARACTER SET utf8mb4 NULL,
    `description` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_activity_logs` PRIMARY KEY (`id`),
    CONSTRAINT `FK_activity_logs_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.659 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.686 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` int NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.721 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` int NOT NULL,
    `RoleId` int NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.735 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` int NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.757 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Subscriptions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `plan_id` int NOT NULL,
    `started_at` datetime(6) NULL,
    `expires_at` datetime(6) NULL,
    `Status` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Subscriptions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Subscriptions_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Plans_plan_id` FOREIGN KEY (`plan_id`) REFERENCES `Plans` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.784 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserConsents` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ConsentType` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Granted` tinyint(1) NOT NULL,
    `GrantedAt` datetime(6) NULL,
    CONSTRAINT `PK_UserConsents` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_UserConsents_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:51.807 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_template_prompts` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_template_id` int NOT NULL,
    `Role` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Content` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_template_prompts` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_template_prompts_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.198 +01:00 [INF] Executed DbCommand (388ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Bots` (
    `id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `api_key` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `is_active` tinyint(1) NOT NULL DEFAULT TRUE,
    `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(),
    `is_deleted` tinyint(1) NOT NULL,
    `is_ready` tinyint(1) NOT NULL,
    `user_id` int NOT NULL,
    `style_id` int NULL,
    `ia_provider_id` int NOT NULL,
    `ai_model_config_id` int NULL,
    `bot_template_id` int NULL,
    CONSTRAINT `PK_Bots` PRIMARY KEY (`id`),
    CONSTRAINT `FK_Bots_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Bots_ai_model_configs_ai_model_config_id` FOREIGN KEY (`ai_model_config_id`) REFERENCES `ai_model_configs` (`id`),
    CONSTRAINT `FK_Bots_bot_ia_providers_ia_provider_id` FOREIGN KEY (`ia_provider_id`) REFERENCES `bot_ia_providers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Bots_bot_styles_style_id` FOREIGN KEY (`style_id`) REFERENCES `bot_styles` (`id`),
    CONSTRAINT `FK_Bots_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.222 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `template_training_sessions` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_template_id` int NOT NULL,
    `session_name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_template_training_sessions` PRIMARY KEY (`id`),
    CONSTRAINT `FK_template_training_sessions_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.243 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_api_settings` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `client_secret` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `allowed_origins` longtext CHARACTER SET utf8mb4 NOT NULL,
    `is_active` tinyint(1) NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_api_settings` PRIMARY KEY (`id`),
    CONSTRAINT `FK_bot_api_settings_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.282 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_profiles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `avatar_url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `bio` longtext CHARACTER SET utf8mb4 NOT NULL,
    `personality_traits` longtext CHARACTER SET utf8mb4 NOT NULL,
    `language` longtext CHARACTER SET utf8mb4 NOT NULL,
    `tone` longtext CHARACTER SET utf8mb4 NOT NULL,
    `restrictions` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_profiles` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_profiles_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.307 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_training_configs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `training_type` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Data` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_training_configs` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_training_configs_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.334 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_training_sessions` (
    `id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `session_name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_training_sessions` PRIMARY KEY (`id`),
    CONSTRAINT `FK_bot_training_sessions_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.358 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_welcome_messages` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NULL,
    `message` longtext CHARACTER SET utf8mb4 NOT NULL,
    `language` longtext CHARACTER SET utf8mb4 NOT NULL,
    `country` longtext CHARACTER SET utf8mb4 NULL,
    `city` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_bot_welcome_messages` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_bot_welcome_messages_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.383 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `public_users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ip_address` longtext CHARACTER SET utf8mb4 NULL,
    `browser_fingerprint` varchar(256) CHARACTER SET utf8mb4 NULL,
    `user_agent` longtext CHARACTER SET utf8mb4 NULL,
    `country` longtext CHARACTER SET utf8mb4 NULL,
    `city` longtext CHARACTER SET utf8mb4 NULL,
    `bot_id` int NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_public_users` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_public_users_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.407 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `training_custom_texts` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `template_training_session_id` int NULL,
    `user_id` int NOT NULL,
    `content` text CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
    `indexed` int NOT NULL,
    `qdrant_id` varchar(255) CHARACTER SET utf8mb4 NULL,
    `content_hash` varchar(255) CHARACTER SET utf8mb4 NULL,
    `status` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `bot_template_id` int NOT NULL,
    CONSTRAINT `PK_training_custom_texts` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_training_custom_texts_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.432 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `training_urls` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_template_id` int NOT NULL,
    `bot_id` int NULL,
    `template_training_session_id` int NULL,
    `user_id` int NOT NULL,
    `url` text CHARACTER SET utf8mb4 NOT NULL,
    `status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),
    `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
    `indexed` int NOT NULL,
    `content_hash` varchar(128) CHARACTER SET utf8mb4 NULL,
    `extracted_text` longtext CHARACTER SET utf8mb4 NULL,
    `qdrant_id` varchar(128) CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_training_urls` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_training_urls_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.470 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `bot_custom_prompts` (
    `id` int NOT NULL AUTO_INCREMENT,
    `role` longtext CHARACTER SET utf8mb4 NOT NULL,
    `content` longtext CHARACTER SET utf8mb4 NOT NULL,
    `template_training_session_id` int NULL,
    `bot_id` int NOT NULL,
    `bot_template_id` int NULL,
    `created_at` datetime(6) NULL,
    `updated_at` datetime(6) NULL,
    CONSTRAINT `PK_bot_custom_prompts` PRIMARY KEY (`id`),
    CONSTRAINT `FK_bot_custom_prompts_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_custom_prompts_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_bot_custom_prompts_template_training_sessions_template_train~` FOREIGN KEY (`template_training_session_id`) REFERENCES `template_training_sessions` (`id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.503 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `uploaded_documents` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NOT NULL,
    `bot_template_id` int NOT NULL,
    `template_training_session_id` int NULL,
    `user_id` int NOT NULL,
    `file_name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `file_type` varchar(20) CHARACTER SET utf8mb4 NULL,
    `file_path` longtext CHARACTER SET utf8mb4 NOT NULL,
    `uploaded_at` datetime(6) NOT NULL,
    `indexed` tinyint(1) NULL,
    `content_hash` longtext CHARACTER SET utf8mb4 NULL,
    `qdrant_id` longtext CHARACTER SET utf8mb4 NULL,
    `extracted_text` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_uploaded_documents` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_uploaded_documents_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_uploaded_documents_bot_templates_bot_template_id` FOREIGN KEY (`bot_template_id`) REFERENCES `bot_templates` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_uploaded_documents_template_training_sessions_template_train~` FOREIGN KEY (`template_training_session_id`) REFERENCES `template_training_sessions` (`id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.540 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Conversations` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `user_id` int NOT NULL,
    `bot_id` int NOT NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    `user_message` longtext CHARACTER SET utf8mb4 NULL,
    `bot_response` longtext CHARACTER SET utf8mb4 NULL,
    `status` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `is_with_ai` tinyint(1) NOT NULL,
    `blocked` tinyint(1) NOT NULL,
    `last_message` longtext CHARACTER SET utf8mb4 NULL,
    `created_at` datetime(6) NOT NULL,
    `updated_at` datetime(6) NOT NULL,
    `last_active_at` datetime(6) NULL,
    `active_mobile_session` tinyint(1) NOT NULL,
    `mobile_device_type` longtext CHARACTER SET utf8mb4 NULL,
    `mobile_joined_at` datetime(6) NULL,
    `closed_at` datetime(6) NULL,
    `expires_at` datetime(6) NULL,
    `public_user_id` int NULL,
    CONSTRAINT `PK_Conversations` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Conversations_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Conversations_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Conversations_public_users_public_user_id` FOREIGN KEY (`public_user_id`) REFERENCES `public_users` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.564 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `knowledge_chunks` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `uploaded_document_id` int NOT NULL,
    `Content` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Metadata` longtext CHARACTER SET utf8mb4 NOT NULL,
    `embedding_vector` longblob NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `template_training_session_id` int NULL,
    CONSTRAINT `PK_knowledge_chunks` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_knowledge_chunks_template_training_sessions_template_trainin~` FOREIGN KEY (`template_training_session_id`) REFERENCES `template_training_sessions` (`id`),
    CONSTRAINT `FK_knowledge_chunks_uploaded_documents_uploaded_document_id` FOREIGN KEY (`uploaded_document_id`) REFERENCES `uploaded_documents` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.596 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `chat_uploaded_files` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `conversation_id` int NOT NULL,
    `user_id` int NULL,
    `public_user_id` int NULL,
    `file_name` varchar(255) CHARACTER SET utf8mb4 NULL,
    `file_type` varchar(50) CHARACTER SET utf8mb4 NULL,
    `file_path` longtext CHARACTER SET utf8mb4 NULL,
    `uploaded_at` datetime(6) NULL,
    `deleted_at` datetime(6) NULL,
    CONSTRAINT `PK_chat_uploaded_files` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_chat_uploaded_files_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`),
    CONSTRAINT `FK_chat_uploaded_files_Conversations_conversation_id` FOREIGN KEY (`conversation_id`) REFERENCES `Conversations` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_chat_uploaded_files_public_users_public_user_id` FOREIGN KEY (`public_user_id`) REFERENCES `public_users` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.641 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Messages` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `bot_id` int NULL,
    `user_id` int NULL,
    `conversation_id` int NOT NULL,
    `sender` longtext CHARACTER SET utf8mb4 NOT NULL,
    `message_text` longtext CHARACTER SET utf8mb4 NULL,
    `tokens_used` int NULL,
    `source` longtext CHARACTER SET utf8mb4 NOT NULL,
    `created_at` datetime(6) NOT NULL,
    `read` tinyint(1) NOT NULL,
    `reply_to_message_id` int NULL,
    `temp_id` varchar(50) CHARACTER SET utf8mb4 NULL,
    `file_id` int NULL,
    `status` varchar(20) CHARACTER SET utf8mb4 NULL,
    `public_user_id` int NULL,
    CONSTRAINT `PK_Messages` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Messages_AspNetUsers_user_id` FOREIGN KEY (`user_id`) REFERENCES `AspNetUsers` (`Id`),
    CONSTRAINT `FK_Messages_Bots_bot_id` FOREIGN KEY (`bot_id`) REFERENCES `Bots` (`id`),
    CONSTRAINT `FK_Messages_Conversations_conversation_id` FOREIGN KEY (`conversation_id`) REFERENCES `Conversations` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Messages_Messages_reply_to_message_id` FOREIGN KEY (`reply_to_message_id`) REFERENCES `Messages` (`Id`),
    CONSTRAINT `FK_Messages_chat_uploaded_files_file_id` FOREIGN KEY (`file_id`) REFERENCES `chat_uploaded_files` (`Id`),
    CONSTRAINT `FK_Messages_public_users_public_user_id` FOREIGN KEY (`public_user_id`) REFERENCES `public_users` (`Id`)
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.666 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `conversation_tags` (
    `id` int NOT NULL AUTO_INCREMENT,
    `conversation_id` int NOT NULL,
    `label` longtext CHARACTER SET utf8mb4 NOT NULL,
    `highlighted_message_id` int NULL,
    `created_at` datetime(6) NOT NULL,
    CONSTRAINT `PK_conversation_tags` PRIMARY KEY (`id`),
    CONSTRAINT `FK_conversation_tags_Conversations_conversation_id` FOREIGN KEY (`conversation_id`) REFERENCES `Conversations` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_conversation_tags_Messages_highlighted_message_id` FOREIGN KEY (`highlighted_message_id`) REFERENCES `Messages` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-11-27 14:48:52.681 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `ix_activity_logs_user_id` ON `activity_logs` (`user_id`);
2025-11-27 14:48:52.701 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ai_model_configs_ia_provider_id` ON `ai_model_configs` (`ia_provider_id`);
2025-11-27 14:48:52.713 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetRoleClaims_RoleId` ON `AspNetRoleClaims` (`RoleId`);
2025-11-27 14:48:52.730 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `RoleNameIndex` ON `AspNetRoles` (`NormalizedName`);
2025-11-27 14:48:52.740 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserClaims_UserId` ON `AspNetUserClaims` (`UserId`);
2025-11-27 14:48:52.750 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserLogins_UserId` ON `AspNetUserLogins` (`UserId`);
2025-11-27 14:48:52.759 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserRoles_RoleId` ON `AspNetUserRoles` (`RoleId`);
2025-11-27 14:48:52.799 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `EmailIndex` ON `AspNetUsers` (`NormalizedEmail`);
2025-11-27 14:48:52.843 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_DocumentTypeId` ON `AspNetUsers` (`DocumentTypeId`);
2025-11-27 14:48:52.874 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_role_id` ON `AspNetUsers` (`role_id`);
2025-11-27 14:48:52.913 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `UserNameIndex` ON `AspNetUsers` (`NormalizedUserName`);
2025-11-27 14:48:52.925 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_api_settings_bot_id_client_secret` ON `bot_api_settings` (`bot_id`, `client_secret`);
2025-11-27 14:48:52.933 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_bot_api_settings_client_secret` ON `bot_api_settings` (`client_secret`);
2025-11-27 14:48:52.944 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_custom_prompts_bot_id` ON `bot_custom_prompts` (`bot_id`);
2025-11-27 14:48:52.953 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_custom_prompts_bot_template_id` ON `bot_custom_prompts` (`bot_template_id`);
2025-11-27 14:48:52.962 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_custom_prompts_template_training_session_id` ON `bot_custom_prompts` (`template_training_session_id`);
2025-11-27 14:48:52.974 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_data_submissions_capture_field_id` ON `bot_data_submissions` (`capture_field_id`);
2025-11-27 14:48:52.987 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_profiles_bot_id` ON `bot_profiles` (`bot_id`);
2025-11-27 14:48:52.999 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_template_prompts_bot_template_id` ON `bot_template_prompts` (`bot_template_id`);
2025-11-27 14:48:53.021 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_templates_ai_model_config_id` ON `bot_templates` (`ai_model_config_id`);
2025-11-27 14:48:53.043 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_templates_default_style_id` ON `bot_templates` (`default_style_id`);
2025-11-27 14:48:53.065 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_templates_ia_provider_id` ON `bot_templates` (`ia_provider_id`);
2025-11-27 14:48:53.078 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_training_configs_bot_id` ON `bot_training_configs` (`bot_id`);
2025-11-27 14:48:53.089 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_training_sessions_bot_id` ON `bot_training_sessions` (`bot_id`);
2025-11-27 14:48:53.101 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_bot_welcome_messages_bot_id` ON `bot_welcome_messages` (`bot_id`);
2025-11-27 14:48:53.157 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bots_ai_model_config_id` ON `Bots` (`ai_model_config_id`);
2025-11-27 14:48:53.197 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bots_bot_template_id` ON `Bots` (`bot_template_id`);
2025-11-27 14:48:53.228 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bots_ia_provider_id` ON `Bots` (`ia_provider_id`);
2025-11-27 14:48:53.260 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bots_style_id` ON `Bots` (`style_id`);
2025-11-27 14:48:53.296 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bots_user_id` ON `Bots` (`user_id`);
2025-11-27 14:48:53.313 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_chat_uploaded_files_conversation_id` ON `chat_uploaded_files` (`conversation_id`);
2025-11-27 14:48:53.325 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_chat_uploaded_files_public_user_id` ON `chat_uploaded_files` (`public_user_id`);
2025-11-27 14:48:53.340 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_chat_uploaded_files_user_id` ON `chat_uploaded_files` (`user_id`);
2025-11-27 14:48:53.353 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_conversation_tags_conversation_id` ON `conversation_tags` (`conversation_id`);
2025-11-27 14:48:53.363 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_conversation_tags_highlighted_message_id` ON `conversation_tags` (`highlighted_message_id`);
2025-11-27 14:48:53.384 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `ix_conversations_bot_id` ON `Conversations` (`bot_id`);
2025-11-27 14:48:53.401 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Conversations_public_user_id` ON `Conversations` (`public_user_id`);
2025-11-27 14:48:53.418 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `ix_conversations_status_updated_at` ON `Conversations` (`status`, `updated_at`);
2025-11-27 14:48:53.435 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `ix_conversations_user_id` ON `Conversations` (`user_id`);
2025-11-27 14:48:53.447 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_knowledge_chunks_template_training_session_id` ON `knowledge_chunks` (`template_training_session_id`);
2025-11-27 14:48:53.460 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_knowledge_chunks_uploaded_document_id` ON `knowledge_chunks` (`uploaded_document_id`);
2025-11-27 14:48:53.480 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Messages_bot_id` ON `Messages` (`bot_id`);
2025-11-27 14:48:53.498 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `ix_messages_conversation_id` ON `Messages` (`conversation_id`);
2025-11-27 14:48:53.512 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `ix_messages_created_at_desc` ON `Messages` (`created_at`);
2025-11-27 14:48:53.526 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Messages_file_id` ON `Messages` (`file_id`);
2025-11-27 14:48:53.543 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Messages_public_user_id` ON `Messages` (`public_user_id`);
2025-11-27 14:48:53.561 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Messages_reply_to_message_id` ON `Messages` (`reply_to_message_id`);
2025-11-27 14:48:53.579 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Messages_user_id` ON `Messages` (`user_id`);
2025-11-27 14:48:53.595 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_public_users_bot_id` ON `public_users` (`bot_id`);
2025-11-27 14:48:53.605 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_rolepermissions_PermissionId` ON `rolepermissions` (`PermissionId`);
2025-11-27 14:48:53.616 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_plan_id` ON `Subscriptions` (`plan_id`);
2025-11-27 14:48:53.626 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_user_id` ON `Subscriptions` (`user_id`);
2025-11-27 14:48:53.647 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_template_training_sessions_bot_template_id` ON `template_training_sessions` (`bot_template_id`);
2025-11-27 14:48:53.661 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_training_custom_texts_bot_id` ON `training_custom_texts` (`bot_id`);
2025-11-27 14:48:53.673 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_training_urls_bot_id` ON `training_urls` (`bot_id`);
2025-11-27 14:48:53.687 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_uploaded_documents_bot_id` ON `uploaded_documents` (`bot_id`);
2025-11-27 14:48:53.698 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_uploaded_documents_bot_template_id` ON `uploaded_documents` (`bot_template_id`);
2025-11-27 14:48:53.713 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_uploaded_documents_template_training_session_id` ON `uploaded_documents` (`template_training_session_id`);
2025-11-27 14:48:53.726 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserConsents_UserId` ON `UserConsents` (`UserId`);
2025-11-27 14:48:53.729 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20251127134841_InitialCreate', '8.0.0');
2025-11-27 14:50:56.664 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:50:56.697 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:50:56.699 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:50:56.704 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:50:56.874 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-27 14:50:56.905 +01:00 [INF]  Servicio de conversaciones inactivas iniciado.
2025-11-27 14:50:56.907 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-27 14:50:56.909 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-27 14:50:56.939 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-27 14:50:56.939 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-27 14:50:56.940 +01:00 [INF] Hosting environment: Development
2025-11-27 14:50:56.940 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-27 14:51:25.481 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/BotIntegrations/generate-widget-token - null null
2025-11-27 14:51:25.481 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24/widget-settings?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g - null null
2025-11-27 14:51:25.509 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:25.509 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:25.516 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/BotIntegrations/generate-widget-token - 204 null null 37.0494ms
2025-11-27 14:51:25.519 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/BotIntegrations/generate-widget-token - application/json 12
2025-11-27 14:51:25.529 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:25.541 +01:00 [INF] HTTP POST /api/BotIntegrations/generate-widget-token started - IP: 127.0.0.1
2025-11-27 14:51:25.541 +01:00 [INF] HTTP GET /api/Bots/24/widget-settings started - IP: 127.0.0.1
2025-11-27 14:51:25.571 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotIntegrationsController.GenerateWidgetToken (Voia.Api)'
2025-11-27 14:51:25.573 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetWidgetSettings (Voia.Api)'
2025-11-27 14:51:25.587 +01:00 [INF] Route matched with {action = "GetWidgetSettings", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Voia.Api.Models.Bots.WidgetSettingsDto]] GetWidgetSettings(Int32, System.String) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-27 14:51:25.587 +01:00 [INF] Route matched with {action = "GenerateWidgetToken", controller = "BotIntegrations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GenerateWidgetToken(Voia.Api.Controllers.GenerateWidgetTokenRequest) on controller Voia.Api.Controllers.BotIntegrationsController (Voia.Api).
2025-11-27 14:51:26.499 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:51:26.880 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__request_BotId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Bots` AS `b`
    WHERE `b`.`id` = @__request_BotId_0)
2025-11-27 14:51:26.880 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
LIMIT 1
2025-11-27 14:51:26.911 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:51:26.911 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:51:26.920 +01:00 [INF] Executed action Voia.Api.Controllers.BotIntegrationsController.GenerateWidgetToken (Voia.Api) in 1327.6625ms
2025-11-27 14:51:26.920 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetWidgetSettings (Voia.Api) in 1328.6385ms
2025-11-27 14:51:26.921 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotIntegrationsController.GenerateWidgetToken (Voia.Api)'
2025-11-27 14:51:26.922 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetWidgetSettings (Voia.Api)'
2025-11-27 14:51:26.923 +01:00 [INF] HTTP POST /api/BotIntegrations/generate-widget-token completed - Status: 400 - Duration: 1383.785ms
2025-11-27 14:51:26.923 +01:00 [INF] HTTP GET /api/Bots/24/widget-settings completed - Status: 404 - Duration: 1383.9249ms
2025-11-27 14:51:26.929 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/BotIntegrations/generate-widget-token - 400 null application/json; charset=utf-8 1410.726ms
2025-11-27 14:51:26.929 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24/widget-settings?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJib3RJZCI6IjI0IiwiYWxsb3dlZERvbWFpbiI6ImxvY2FsaG9zdCIsIm5iZiI6MTc2NDAxNTMxOCwiZXhwIjoxNzk1NTUxMzE4LCJpYXQiOjE3NjQwMTUzMTgsImlzcyI6IlZvaWEuQXBpIiwiYXVkIjoiVm9pYS5DbGllbnQifQ.qMHqYuPkLVyTKChopHoPtu2joXUmHOYofl7oS0Cla8g - 404 null application/json; charset=utf-8 1450.4242ms
2025-11-27 14:51:26.934 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/BotStyles/widget/24 - null null
2025-11-27 14:51:26.935 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:26.939 +01:00 [INF] HTTP GET /api/BotStyles/widget/24 started - IP: 127.0.0.1
2025-11-27 14:51:26.941 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotStylesController.GetStyleForWidget (Voia.Api)'
2025-11-27 14:51:26.945 +01:00 [INF] Route matched with {action = "GetStyleForWidget", controller = "BotStyles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetStyleForWidget(Int32) on controller Voia.Api.Controllers.BotStylesController (Voia.Api).
2025-11-27 14:51:27.001 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__botId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__botId_0
LIMIT 1
2025-11-27 14:51:27.003 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:51:27.004 +01:00 [INF] Executed action Voia.Api.Controllers.BotStylesController.GetStyleForWidget (Voia.Api) in 57.9477ms
2025-11-27 14:51:27.005 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotStylesController.GetStyleForWidget (Voia.Api)'
2025-11-27 14:51:27.006 +01:00 [INF] HTTP GET /api/BotStyles/widget/24 completed - Status: 404 - Duration: 67.108ms
2025-11-27 14:51:27.007 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/BotStyles/widget/24 - 404 null application/json; charset=utf-8 73.4878ms
2025-11-27 14:51:27.013 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24 - null null
2025-11-27 14:51:27.016 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:27.016 +01:00 [INF] HTTP GET /api/Bots/24 started - IP: 127.0.0.1
2025-11-27 14:51:27.017 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetBotById (Voia.Api)'
2025-11-27 14:51:27.021 +01:00 [INF] Route matched with {action = "GetBotById", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetBotById(Int32) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-27 14:51:27.070 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
INNER JOIN `AspNetUsers` AS `a` ON `b`.`user_id` = `a`.`Id`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
ORDER BY `b`.`id`, `a`.`Id`, `b0`.`id`
LIMIT 1
2025-11-27 14:51:27.072 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:51:27.073 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetBotById (Voia.Api) in 50.5478ms
2025-11-27 14:51:27.074 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetBotById (Voia.Api)'
2025-11-27 14:51:27.075 +01:00 [INF] HTTP GET /api/Bots/24 completed - Status: 404 - Duration: 58.7404ms
2025-11-27 14:51:27.076 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24 - 404 null application/json; charset=utf-8 63.4305ms
2025-11-27 14:51:27.081 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/conversations/user-location - null null
2025-11-27 14:51:27.082 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:27.083 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/conversations/user-location - 204 null null 2.4563ms
2025-11-27 14:51:27.084 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/conversations/user-location - null null
2025-11-27 14:51:27.088 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:27.090 +01:00 [INF] HTTP GET /api/conversations/user-location started - IP: 127.0.0.1
2025-11-27 14:51:27.091 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api)'
2025-11-27 14:51:27.094 +01:00 [INF] Route matched with {action = "GetUserLocation", controller = "Conversations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserLocation() on controller Voia.Api.Controllers.ConversationsController (Voia.Api).
2025-11-27 14:51:27.240 +01:00 [INF] GeoLocation Service initialized with GeoLite2 database
2025-11-27 14:51:27.250 +01:00 [INF] Geolocation for IP 190.147.2.0: Country=Colombia (CO), City=Bogot
2025-11-27 14:51:27.251 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType94`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:51:27.255 +01:00 [INF] Executed action Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api) in 159.7285ms
2025-11-27 14:51:27.255 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.ConversationsController.GetUserLocation (Voia.Api)'
2025-11-27 14:51:27.256 +01:00 [INF] HTTP GET /api/conversations/user-location completed - Status: 200 - Duration: 166.6481ms
2025-11-27 14:51:27.258 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/conversations/user-location - 200 null application/json; charset=utf-8 173.2615ms
2025-11-27 14:51:27.264 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Bots/24/context - null null
2025-11-27 14:51:27.264 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - null null
2025-11-27 14:51:27.267 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:27.268 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:51:27.268 +01:00 [INF] HTTP GET /api/Bots/24/context started - IP: 127.0.0.1
2025-11-27 14:51:27.269 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location started - IP: 127.0.0.1
2025-11-27 14:51:27.270 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api)'
2025-11-27 14:51:27.270 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-27 14:51:27.274 +01:00 [INF] Route matched with {action = "GetBotContext", controller = "Bots"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetBotContext(Int32, System.String) on controller Voia.Api.Controllers.BotsController (Voia.Api).
2025-11-27 14:51:27.275 +01:00 [INF] Route matched with {action = "GetByLocation", controller = "BotWelcomeMessages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByLocation(Int32, System.String, System.String, System.String) on controller Voia.Api.Controllers.BotWelcomeMessagesController (Voia.Api).
2025-11-27 14:51:27.291 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__botId_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `Bots` AS `b`
INNER JOIN `AspNetUsers` AS `a` ON `b`.`user_id` = `a`.`Id`
WHERE `b`.`id` = @__botId_0
LIMIT 1
2025-11-27 14:51:27.293 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:51:27.294 +01:00 [INF] Executed action Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api) in 17.1885ms
2025-11-27 14:51:27.295 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotWelcomeMessagesController.GetByLocation (Voia.Api)'
2025-11-27 14:51:27.296 +01:00 [INF] HTTP GET /api/botwelcomemessages/get-by-location completed - Status: 404 - Duration: 27.305ms
2025-11-27 14:51:27.297 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='24'], CommandType='"Text"', CommandTimeout='30']
SELECT `b`.`id`, `b`.`ai_model_config_id`, `b`.`api_key`, `b`.`bot_template_id`, `b`.`created_at`, `b`.`description`, `b`.`ia_provider_id`, `b`.`is_active`, `b`.`is_deleted`, `b`.`is_ready`, `b`.`name`, `b`.`style_id`, `b`.`updated_at`, `b`.`user_id`, `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `b0`.`id`, `b0`.`allow_file_upload`, `b0`.`allow_image_upload`, `b0`.`avatar_url`, `b0`.`custom_css`, `b0`.`font_family`, `b0`.`header_background_color`, `b0`.`Name`, `b0`.`position`, `b0`.`primary_color`, `b0`.`secondary_color`, `b0`.`style_template_id`, `b0`.`theme`, `b0`.`Title`, `b0`.`updated_at`, `b0`.`user_id`
FROM `Bots` AS `b`
INNER JOIN `AspNetUsers` AS `a` ON `b`.`user_id` = `a`.`Id`
LEFT JOIN `bot_styles` AS `b0` ON `b`.`style_id` = `b0`.`id`
WHERE `b`.`id` = @__id_0
LIMIT 1
2025-11-27 14:51:27.298 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/botwelcomemessages/get-by-location?botId=24&country=Colombia&city=Bogot%C3%A1&language=es - 404 null application/json; charset=utf-8 33.1932ms
2025-11-27 14:51:27.300 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-27 14:51:27.316 +01:00 [INF] Executed action Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api) in 41.1919ms
2025-11-27 14:51:27.317 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.BotsController.GetBotContext (Voia.Api)'
2025-11-27 14:51:27.318 +01:00 [INF] HTTP GET /api/Bots/24/context completed - Status: 404 - Duration: 50.0266ms
2025-11-27 14:51:27.320 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Bots/24/context - 404 null application/problem+json; charset=utf-8 55.4083ms
2025-11-27 14:53:48.203 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 14:53:48.205 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:53:48.206 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 14:53:48.207 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 14:53:48.209 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 14:53:48.215 +01:00 [INF] CSRF token generado: 1ToBPr0FI8...
2025-11-27 14:53:48.217 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:53:48.220 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 9.4019ms
2025-11-27 14:53:48.221 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 14:53:48.222 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 16.5303ms
2025-11-27 14:53:48.223 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 20.5353ms
2025-11-27 14:53:48.229 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 14:53:48.231 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:53:48.231 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.4299ms
2025-11-27 14:53:48.233 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 14:53:48.236 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:53:48.237 +01:00 [INF] CSRF token validado y consumido: 1ToBPr0FI8...
2025-11-27 14:53:48.238 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 14:53:48.239 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 14:53:48.242 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 14:53:48.267 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 14:53:48.272 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:53:48.275 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 31.2446ms
2025-11-27 14:53:48.276 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 14:53:48.277 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 39.1722ms
2025-11-27 14:53:48.279 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 45.4747ms
2025-11-27 14:55:56.924 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T13:40:56.9075290Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 14:58:58.281 +01:00 [INF] Application is shutting down...
2025-11-27 14:59:03.350 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 14:59:03.396 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 14:59:03.398 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 14:59:03.405 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 14:59:03.635 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-27 14:59:03.657 +01:00 [INF]  Servicio de conversaciones inactivas iniciado.
2025-11-27 14:59:03.660 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-27 14:59:03.662 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-27 14:59:03.690 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-27 14:59:03.691 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-27 14:59:03.691 +01:00 [INF] Hosting environment: Development
2025-11-27 14:59:03.692 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-27 14:59:12.291 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 14:59:12.318 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:59:12.340 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 14:59:12.373 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 14:59:12.384 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 14:59:12.555 +01:00 [INF] CSRF token generado: CkZ35iXmHx...
2025-11-27 14:59:12.562 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:59:12.576 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 189.3545ms
2025-11-27 14:59:12.579 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 14:59:12.580 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 241.8374ms
2025-11-27 14:59:12.582 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 293.0718ms
2025-11-27 14:59:12.587 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 14:59:12.595 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:59:12.596 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 9.2783ms
2025-11-27 14:59:12.598 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 14:59:12.601 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:59:12.603 +01:00 [INF] CSRF token validado y consumido: CkZ35iXmHx...
2025-11-27 14:59:12.604 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 14:59:12.606 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 14:59:12.612 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 14:59:13.058 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 14:59:13.425 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 14:59:13.447 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:59:13.452 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 839.5298ms
2025-11-27 14:59:13.454 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 14:59:13.455 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 850.8097ms
2025-11-27 14:59:13.459 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 861.0283ms
2025-11-27 14:59:28.801 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 14:59:28.804 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:59:28.806 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 14:59:28.808 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 14:59:28.808 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 14:59:28.816 +01:00 [INF] CSRF token generado: 5UTqZKpfA2...
2025-11-27 14:59:28.817 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:59:28.818 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 8.5634ms
2025-11-27 14:59:28.819 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 14:59:28.820 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 14.2946ms
2025-11-27 14:59:28.822 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 20.7538ms
2025-11-27 14:59:28.826 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 14:59:28.828 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:59:28.828 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.4045ms
2025-11-27 14:59:28.831 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 14:59:28.832 +01:00 [INF] CORS policy execution successful.
2025-11-27 14:59:28.834 +01:00 [INF] CSRF token validado y consumido: 5UTqZKpfA2...
2025-11-27 14:59:28.834 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 14:59:28.835 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 14:59:28.836 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 14:59:28.881 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 14:59:28.884 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 14:59:28.885 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 47.0709ms
2025-11-27 14:59:28.886 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 14:59:28.886 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 52.0483ms
2025-11-27 14:59:28.888 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 57.3676ms
2025-11-27 15:04:03.697 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T13:49:03.6704121Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:09:03.725 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T13:54:03.7201229Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:14:03.749 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T13:59:03.7442785Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:19:03.741 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:04:03.7365494Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:24:03.737 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:09:03.7325196Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:24:50.325 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 15:24:50.327 +01:00 [INF] CORS policy execution successful.
2025-11-27 15:24:50.328 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 15:24:50.329 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 15:24:50.330 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 15:24:50.332 +01:00 [INF] CSRF token generado: 13mqWDly3Z...
2025-11-27 15:24:50.333 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 15:24:50.334 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.9139ms
2025-11-27 15:24:50.335 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 15:24:50.336 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 8.0446ms
2025-11-27 15:24:50.337 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 12.1976ms
2025-11-27 15:24:50.342 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 15:24:50.344 +01:00 [INF] CORS policy execution successful.
2025-11-27 15:24:50.345 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.7158ms
2025-11-27 15:24:50.347 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 15:24:50.349 +01:00 [INF] CORS policy execution successful.
2025-11-27 15:24:50.350 +01:00 [INF] CSRF token validado y consumido: 13mqWDly3Z...
2025-11-27 15:24:50.350 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 15:24:50.351 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 15:24:50.352 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 15:24:50.359 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 15:24:50.361 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 15:24:50.362 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 8.6353ms
2025-11-27 15:24:50.363 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 15:24:50.364 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 13.4816ms
2025-11-27 15:24:50.365 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 17.9375ms
2025-11-27 15:29:03.726 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:14:03.7216502Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:34:03.728 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:19:03.7236702Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:39:03.724 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:24:03.7191797Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:44:03.719 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:29:03.7154879Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:49:03.726 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:34:03.7216695Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:54:03.727 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:39:03.7230927Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 15:59:03.726 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:44:03.7215090Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:04:03.734 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:49:03.7294283Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:09:03.740 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:54:03.7359743Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:14:03.749 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T14:59:03.7450252Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:19:03.752 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:04:03.7484540Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:24:03.760 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:09:03.7559595Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:29:03.768 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:14:03.7633883Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:34:03.781 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:19:03.7767465Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:39:03.794 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:24:03.7888138Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:44:03.816 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:29:03.8123460Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:49:03.840 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:34:03.8360454Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:54:03.857 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:39:03.8535138Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 16:59:03.870 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:44:03.8655957Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:04:03.883 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:49:03.8792155Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:09:03.907 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:54:03.9031413Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:14:03.914 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T15:59:03.9092200Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:19:03.925 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:04:03.9215319Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:24:03.951 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:09:03.9468392Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:29:03.975 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:14:03.9700330Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:34:03.989 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:19:03.9850501Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:39:04.002 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:24:03.9975412Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:44:04.018 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:29:04.0142654Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:49:04.030 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:34:04.0261726Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:54:04.049 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:39:04.0454266Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 17:56:22.805 +01:00 [INF] Application is shutting down...
2025-11-27 17:56:31.083 +01:00 [INF]  CORS Configuration Loaded
2025-11-27 17:56:31.117 +01:00 [INF]    Frontend Origins: http://localhost:3000, http://127.0.0.1:3000, http://127.0.0.1:5500, http://localhost:5500, https://voia-client.lat
2025-11-27 17:56:31.118 +01:00 [INF]    Widget Origins: http://localhost:3000, http://127.0.0.1:3000, http://localhost:5006, http://127.0.0.1:5006
2025-11-27 17:56:31.125 +01:00 [WRN]  REDIS_CONNECTION not configured. Using Distributed Memory Cache (single-instance only).
2025-11-27 17:56:31.290 +01:00 [INF] User profile is available. Using 'C:\Users\Puesto 8\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-27 17:56:31.308 +01:00 [INF]  Servicio de conversaciones inactivas iniciado.
2025-11-27 17:56:31.311 +01:00 [INF] MessageProcessingWorker started. Redis enabled: false
2025-11-27 17:56:31.312 +01:00 [INF] Using InMemoryMessageQueue consumer.
2025-11-27 17:56:31.338 +01:00 [INF] Now listening on: http://localhost:5006
2025-11-27 17:56:31.339 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-27 17:56:31.339 +01:00 [INF] Hosting environment: Development
2025-11-27 17:56:31.340 +01:00 [INF] Content root path: C:\Users\Puesto 8\Documents\VIA\vo-ia
2025-11-27 17:58:40.495 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 17:58:40.520 +01:00 [INF] CORS policy execution successful.
2025-11-27 17:58:40.545 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 17:58:40.578 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 17:58:40.587 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 17:58:40.763 +01:00 [INF] CSRF token generado: O5XjBs3/et...
2025-11-27 17:58:40.769 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 17:58:40.784 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 193.633ms
2025-11-27 17:58:40.787 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 17:58:40.788 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 245.3759ms
2025-11-27 17:58:40.791 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 296.2075ms
2025-11-27 17:58:40.817 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 17:58:40.825 +01:00 [INF] CORS policy execution successful.
2025-11-27 17:58:40.826 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 8.8633ms
2025-11-27 17:58:40.828 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 17:58:40.831 +01:00 [INF] CORS policy execution successful.
2025-11-27 17:58:40.833 +01:00 [INF] CSRF token validado y consumido: O5XjBs3/et...
2025-11-27 17:58:40.834 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 17:58:40.836 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 17:58:40.843 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 17:58:41.332 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-27 17:58:41.732 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 17:58:41.760 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 17:58:41.767 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 922.059ms
2025-11-27 17:58:41.768 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 17:58:41.769 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 935.1599ms
2025-11-27 17:58:41.774 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 945.7981ms
2025-11-27 18:01:31.361 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:46:31.3112620Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:01:54.887 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:01:54.890 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:01:54.892 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:01:54.894 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:01:54.895 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:01:54.901 +01:00 [INF] CSRF token generado: V1zOc9BPOm...
2025-11-27 18:01:54.902 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:01:54.903 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 7.2873ms
2025-11-27 18:01:54.904 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:01:54.905 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 13.0661ms
2025-11-27 18:01:54.907 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 19.1426ms
2025-11-27 18:01:54.916 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:01:54.918 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:01:54.918 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.4952ms
2025-11-27 18:01:54.921 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 406
2025-11-27 18:01:54.922 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:01:54.924 +01:00 [INF] CSRF token validado y consumido: V1zOc9BPOm...
2025-11-27 18:01:54.925 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:01:54.926 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:01:54.926 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:01:54.941 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='IVAND@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:01:54.943 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:01:54.944 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 16.8162ms
2025-11-27 18:01:54.945 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:01:54.946 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 21.5856ms
2025-11-27 18:01:54.948 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 26.8389ms
2025-11-27 18:06:31.387 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:51:31.3822870Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:09:15.422 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:09:15.424 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:09:15.425 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:09:15.426 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:09:15.426 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:09:15.429 +01:00 [INF] CSRF token generado: fapcVA/XSC...
2025-11-27 18:09:15.430 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:09:15.431 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 3.1255ms
2025-11-27 18:09:15.432 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:09:15.432 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.7042ms
2025-11-27 18:09:15.434 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 11.8527ms
2025-11-27 18:09:15.439 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:09:15.440 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:09:15.441 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.5277ms
2025-11-27 18:09:15.443 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 406
2025-11-27 18:09:15.445 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:09:15.446 +01:00 [INF] CSRF token validado y consumido: fapcVA/XSC...
2025-11-27 18:09:15.447 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:09:15.448 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:09:15.448 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:09:15.454 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='IVAND@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:09:15.456 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:09:15.457 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 7.5507ms
2025-11-27 18:09:15.458 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:09:15.459 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 12.1751ms
2025-11-27 18:09:15.460 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 16.9135ms
2025-11-27 18:10:12.896 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:10:12.898 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:10:12.899 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:10:12.900 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:10:12.900 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:10:12.902 +01:00 [INF] CSRF token generado: kI1/q2g2T/...
2025-11-27 18:10:12.903 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:10:12.904 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.3226ms
2025-11-27 18:10:12.905 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:10:12.906 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.0037ms
2025-11-27 18:10:12.907 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.9413ms
2025-11-27 18:10:13.024 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:10:13.025 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:10:13.026 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.1715ms
2025-11-27 18:10:13.028 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 18:10:13.030 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:10:13.030 +01:00 [INF] CSRF token validado y consumido: kI1/q2g2T/...
2025-11-27 18:10:13.031 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:10:13.032 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:10:13.032 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:10:13.036 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:10:13.038 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:10:13.039 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 5.2904ms
2025-11-27 18:10:13.040 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:10:13.041 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 10.2399ms
2025-11-27 18:10:13.042 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 14.0074ms
2025-11-27 18:11:31.392 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T16:56:31.3915455Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:12:46.482 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:12:46.484 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:12:46.485 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:12:46.487 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:12:46.487 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:12:46.489 +01:00 [INF] CSRF token generado: LfKFb+EhiB...
2025-11-27 18:12:46.490 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:12:46.491 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.4151ms
2025-11-27 18:12:46.492 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:12:46.492 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.2947ms
2025-11-27 18:12:46.494 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 11.5275ms
2025-11-27 18:12:46.499 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:12:46.501 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:12:46.501 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.1743ms
2025-11-27 18:12:46.504 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 18:12:46.506 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:12:46.507 +01:00 [INF] CSRF token validado y consumido: LfKFb+EhiB...
2025-11-27 18:12:46.507 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:12:46.508 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:12:46.509 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:12:46.513 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:12:46.514 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:12:46.516 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 5.2584ms
2025-11-27 18:12:46.516 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:12:46.517 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 9.8906ms
2025-11-27 18:12:46.518 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 14.4586ms
2025-11-27 18:16:31.400 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:01:31.3987472Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:17:41.552 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:17:41.554 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:17:41.555 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:17:41.556 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:17:41.556 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:17:41.558 +01:00 [INF] CSRF token generado: vu0TgX+OkM...
2025-11-27 18:17:41.559 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:17:41.560 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.1855ms
2025-11-27 18:17:41.561 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:17:41.561 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.6091ms
2025-11-27 18:17:41.563 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.5102ms
2025-11-27 18:17:41.633 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:17:41.634 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:17:41.635 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.2376ms
2025-11-27 18:17:41.637 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 18:17:41.638 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:17:41.639 +01:00 [INF] CSRF token validado y consumido: vu0TgX+OkM...
2025-11-27 18:17:41.640 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:17:41.641 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:17:41.641 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:17:41.644 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:17:41.646 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:17:41.647 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 4.5022ms
2025-11-27 18:17:41.648 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:17:41.649 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 9.0472ms
2025-11-27 18:17:41.650 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 12.7368ms
2025-11-27 18:20:55.745 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:20:55.747 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:20:55.748 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:20:55.749 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:20:55.750 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:20:55.751 +01:00 [INF] CSRF token generado: bcMgdJ8zjo...
2025-11-27 18:20:55.752 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:20:55.753 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 1.9909ms
2025-11-27 18:20:55.754 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:20:55.754 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.2374ms
2025-11-27 18:20:55.755 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.0747ms
2025-11-27 18:20:55.759 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:20:55.761 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:20:55.762 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.3726ms
2025-11-27 18:20:55.764 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 405
2025-11-27 18:20:55.766 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:20:55.766 +01:00 [INF] CSRF token validado y consumido: bcMgdJ8zjo...
2025-11-27 18:20:55.767 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:20:55.768 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:20:55.769 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:20:55.781 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='IVAN@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:20:55.783 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:20:55.784 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 14.0665ms
2025-11-27 18:20:55.785 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:20:55.785 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 18.3944ms
2025-11-27 18:20:55.786 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 22.3751ms
2025-11-27 18:21:31.412 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:06:31.4093314Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:22:19.431 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:22:19.433 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:22:19.433 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:22:19.434 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:22:19.435 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:22:19.437 +01:00 [INF] CSRF token generado: j7CRCF08zn...
2025-11-27 18:22:19.438 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:22:19.438 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.2462ms
2025-11-27 18:22:19.439 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:22:19.440 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.7511ms
2025-11-27 18:22:19.441 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.4272ms
2025-11-27 18:22:19.537 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:22:19.539 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:22:19.539 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.5306ms
2025-11-27 18:22:19.545 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 404
2025-11-27 18:22:19.546 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:22:19.547 +01:00 [INF] CSRF token validado y consumido: j7CRCF08zn...
2025-11-27 18:22:19.548 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:22:19.548 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:22:19.549 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:22:19.553 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:22:19.554 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:22:19.556 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 5.1845ms
2025-11-27 18:22:19.556 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:22:19.557 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 9.5714ms
2025-11-27 18:22:19.559 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 14.008ms
2025-11-27 18:23:48.669 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:23:48.671 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:23:48.672 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:23:48.673 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:23:48.674 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:23:48.676 +01:00 [INF] CSRF token generado: RTjQiFzVKP...
2025-11-27 18:23:48.676 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:23:48.677 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.1949ms
2025-11-27 18:23:48.678 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:23:48.679 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.9173ms
2025-11-27 18:23:48.680 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.6238ms
2025-11-27 18:23:48.684 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:23:48.685 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:23:48.686 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.0025ms
2025-11-27 18:23:48.688 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 408
2025-11-27 18:23:48.690 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:23:48.690 +01:00 [INF] CSRF token validado y consumido: RTjQiFzVKP...
2025-11-27 18:23:48.691 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:23:48.692 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:23:48.693 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:23:48.696 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:23:48.765 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-27 18:23:48.985 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='0', @p1='calle falsa' (Size = 4000), @p2='' (Size = 4000), @p3='Bogot D.C.' (Size = 4000), @p4='75e88e3b-ab30-4d68-8099-5fdaafccb25d' (Size = 4000), @p5='Colombia' (Size = 4000), @p6='2025-11-27T17:23:48.6980051Z' (DbType = DateTime), @p7='1096188416' (Size = 4000), @p8='' (Size = 4000), @p9='1' (Nullable = true), @p10='iva@gmail.com' (Size = 256), @p11='False', @p12='False', @p13='False', @p14='True', @p15=NULL (DbType = DateTimeOffset), @p16='Ivan Herrera' (Size = 4000), @p17='IVA@GMAIL.COM' (Size = 256), @p18='IVA@GMAIL.COM' (Size = 256), @p19='AQAAAAIAAYagAAAAEJx9vCRBKLvTxUQuw9qbiKbwW/vmdCAwoZ5YEL9OlYbK8wW1euO8qT8yNbIRuOqfBQ==' (Size = 4000), @p20='3178531533' (Size = 4000), @p21=NULL (Size = 4000), @p22='False', @p23=NULL (Size = 4000), @p24=NULL (DbType = Int32), @p25='VURPLBBACUASFJIJ3LG3KSBOULVSSUZA' (Size = 4000), @p26=NULL (Size = 4000), @p27='False', @p28='2025-11-27T17:23:48.6980052Z' (DbType = DateTime), @p29='iva@gmail.com' (Size = 256), @p30='CREATE' (Size = 100), @p31='2025-11-27T17:23:48.9122695Z' (DbType = DateTime), @p32='Created new User' (Size = 4000), @p33='-2147482647' (Nullable = true), @p34='User' (Size = 100), @p35='127.0.0.1' (Size = 45), @p36='{"Id":-2147482647,"AccessFailedCount":0,"Address":"calle falsa","AvatarUrl":"","City":"Bogot D.C.","ConcurrencyStamp":"75e88e3b-ab30-4d68-8099-5fdaafccb25d","Country":"Colombia","CreatedAt":"2025-11-27T17:23:48.6980051Z","DocumentNumber":"1096188416","DocumentPhotoUrl":"","DocumentTypeId":1,"Email":"iva@gmail.com","EmailConfirmed":false,"IsActive":false,"IsVerified":false,"LockoutEnabled":true,"LockoutEnd":null,"Name":"Ivan Herrera","NormalizedEmail":"IVA@GMAIL.COM","NormalizedUserName":"IVA@GMAIL.COM","PasswordHash":"AQAAAAIAAYagAAAAEJx9vCRBKLvTxUQuw9qbiKbwW/vmdCAwoZ5YEL9OlYbK8wW1euO8qT8yNbIRuOqfBQ==","Phone":"3178531533","PhoneNumber":null,"PhoneNumberConfirmed":false,"PublicDataToken":null,"RoleId":null,"SecurityStamp":"VURPLBBACUASFJIJ3LG3KSBOULVSSUZA","Status":null,"TwoFactorEnabled":false,"UpdatedAt":"2025-11-27T17:23:48.6980052Z","UserName":"iva@gmail.com"}' (Size = 4000), @p37='' (Size = 4000), @p38='0HNHDQORIDVB2:00000009' (Size = 50), @p39='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p40=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUsers` (`AccessFailedCount`, `Address`, `AvatarUrl`, `City`, `ConcurrencyStamp`, `Country`, `CreatedAt`, `DocumentNumber`, `document_photo_url`, `DocumentTypeId`, `Email`, `EmailConfirmed`, `IsActive`, `IsVerified`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `Phone`, `PhoneNumber`, `PhoneNumberConfirmed`, `PublicDataToken`, `role_id`, `SecurityStamp`, `Status`, `TwoFactorEnabled`, `UpdatedAt`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
SELECT `Id`
FROM `AspNetUsers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-27 18:23:49.016 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Voia.Api.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-27 18:23:49.036 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType37`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:23:49.038 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 344.0768ms
2025-11-27 18:23:49.039 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:23:49.040 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 500 - Duration: 348.5575ms
2025-11-27 18:23:49.041 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 500 null application/json; charset=utf-8 352.8563ms
2025-11-27 18:24:36.774 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:24:36.776 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:24:36.776 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:24:36.777 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:24:36.778 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:24:36.780 +01:00 [INF] CSRF token generado: KsQ6OmZyT2...
2025-11-27 18:24:36.781 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:24:36.781 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.2121ms
2025-11-27 18:24:36.782 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:24:36.783 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.8501ms
2025-11-27 18:24:36.784 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.8145ms
2025-11-27 18:24:36.791 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:24:36.793 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:24:36.794 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.4796ms
2025-11-27 18:24:36.796 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 408
2025-11-27 18:24:36.798 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:24:36.798 +01:00 [INF] CSRF token validado y consumido: KsQ6OmZyT2...
2025-11-27 18:24:36.799 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:24:36.800 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:24:36.800 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:24:36.804 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:24:36.865 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-27 18:24:36.870 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='0', @p1='calle falsa' (Size = 4000), @p2='' (Size = 4000), @p3='Bogot D.C.' (Size = 4000), @p4='b5f559bc-c4a6-48f2-bed2-be0e24515b03' (Size = 4000), @p5='Colombia' (Size = 4000), @p6='2025-11-27T17:24:36.8057842Z' (DbType = DateTime), @p7='1096188416' (Size = 4000), @p8='' (Size = 4000), @p9='1' (Nullable = true), @p10='iva@gmail.com' (Size = 256), @p11='False', @p12='False', @p13='False', @p14='True', @p15=NULL (DbType = DateTimeOffset), @p16='Ivan Herrera' (Size = 4000), @p17='IVA@GMAIL.COM' (Size = 256), @p18='IVA@GMAIL.COM' (Size = 256), @p19='AQAAAAIAAYagAAAAENi83CFsg6GDLHQoqJ1zPZzEVZ9Ca2y7ypcD4nU/N0crrf9OesIxCI6vI1g26S/xMg==' (Size = 4000), @p20='3178531533' (Size = 4000), @p21=NULL (Size = 4000), @p22='False', @p23=NULL (Size = 4000), @p24=NULL (DbType = Int32), @p25='5FSZXUW5ALKHKOT4MJBJNAQYMA7OF4H2' (Size = 4000), @p26=NULL (Size = 4000), @p27='False', @p28='2025-11-27T17:24:36.8057842Z' (DbType = DateTime), @p29='iva@gmail.com' (Size = 256), @p30='CREATE' (Size = 100), @p31='2025-11-27T17:24:36.8681232Z' (DbType = DateTime), @p32='Created new User' (Size = 4000), @p33='-2147482646' (Nullable = true), @p34='User' (Size = 100), @p35='127.0.0.1' (Size = 45), @p36='{"Id":-2147482646,"AccessFailedCount":0,"Address":"calle falsa","AvatarUrl":"","City":"Bogot D.C.","ConcurrencyStamp":"b5f559bc-c4a6-48f2-bed2-be0e24515b03","Country":"Colombia","CreatedAt":"2025-11-27T17:24:36.8057842Z","DocumentNumber":"1096188416","DocumentPhotoUrl":"","DocumentTypeId":1,"Email":"iva@gmail.com","EmailConfirmed":false,"IsActive":false,"IsVerified":false,"LockoutEnabled":true,"LockoutEnd":null,"Name":"Ivan Herrera","NormalizedEmail":"IVA@GMAIL.COM","NormalizedUserName":"IVA@GMAIL.COM","PasswordHash":"AQAAAAIAAYagAAAAENi83CFsg6GDLHQoqJ1zPZzEVZ9Ca2y7ypcD4nU/N0crrf9OesIxCI6vI1g26S/xMg==","Phone":"3178531533","PhoneNumber":null,"PhoneNumberConfirmed":false,"PublicDataToken":null,"RoleId":null,"SecurityStamp":"5FSZXUW5ALKHKOT4MJBJNAQYMA7OF4H2","Status":null,"TwoFactorEnabled":false,"UpdatedAt":"2025-11-27T17:24:36.8057842Z","UserName":"iva@gmail.com"}' (Size = 4000), @p37='' (Size = 4000), @p38='0HNHDQORIDVB2:0000000C' (Size = 50), @p39='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p40=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUsers` (`AccessFailedCount`, `Address`, `AvatarUrl`, `City`, `ConcurrencyStamp`, `Country`, `CreatedAt`, `DocumentNumber`, `document_photo_url`, `DocumentTypeId`, `Email`, `EmailConfirmed`, `IsActive`, `IsVerified`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `Phone`, `PhoneNumber`, `PhoneNumberConfirmed`, `PublicDataToken`, `role_id`, `SecurityStamp`, `Status`, `TwoFactorEnabled`, `UpdatedAt`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
SELECT `Id`
FROM `AspNetUsers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-27 18:24:36.875 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Voia.Api.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-27 18:24:36.883 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType37`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:24:36.884 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 82.7217ms
2025-11-27 18:24:36.885 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:24:36.886 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 500 - Duration: 87.0616ms
2025-11-27 18:24:36.887 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 500 null application/json; charset=utf-8 90.8616ms
2025-11-27 18:25:25.911 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:25:25.913 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:25:25.913 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:25:25.914 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:25:25.915 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:25:25.916 +01:00 [INF] CSRF token generado: AJBPdVrRZ7...
2025-11-27 18:25:25.917 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:25:25.918 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.1356ms
2025-11-27 18:25:25.919 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:25:25.920 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.294ms
2025-11-27 18:25:25.921 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.2276ms
2025-11-27 18:25:26.033 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:25:26.034 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:25:26.035 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.1796ms
2025-11-27 18:25:26.041 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 407
2025-11-27 18:25:26.043 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:25:26.043 +01:00 [INF] CSRF token validado y consumido: AJBPdVrRZ7...
2025-11-27 18:25:26.044 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:25:26.045 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:25:26.046 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:25:26.049 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:25:26.050 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType117`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:25:26.051 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 4.4734ms
2025-11-27 18:25:26.052 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:25:26.053 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 400 - Duration: 9.2211ms
2025-11-27 18:25:26.054 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 400 null application/json; charset=utf-8 13.2954ms
2025-11-27 18:25:38.341 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:25:38.343 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:25:38.343 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:25:38.344 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:25:38.345 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:25:38.347 +01:00 [INF] CSRF token generado: fNYZKgxTNg...
2025-11-27 18:25:38.347 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:25:38.348 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.1466ms
2025-11-27 18:25:38.349 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:25:38.350 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.4153ms
2025-11-27 18:25:38.351 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.2679ms
2025-11-27 18:25:38.355 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:25:38.357 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:25:38.358 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.5904ms
2025-11-27 18:25:38.360 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 408
2025-11-27 18:25:38.361 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:25:38.362 +01:00 [INF] CSRF token validado y consumido: fNYZKgxTNg...
2025-11-27 18:25:38.362 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:25:38.363 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:25:38.364 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:25:38.367 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:25:38.420 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-27 18:25:38.424 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='0', @p1='calle falsa' (Size = 4000), @p2='' (Size = 4000), @p3='Bogot D.C.' (Size = 4000), @p4='a9f62967-850f-4d38-ab83-2de2d0681b23' (Size = 4000), @p5='Colombia' (Size = 4000), @p6='2025-11-27T17:25:38.3686218Z' (DbType = DateTime), @p7='1096188416' (Size = 4000), @p8='' (Size = 4000), @p9='1' (Nullable = true), @p10='iva@gmail.com' (Size = 256), @p11='False', @p12='False', @p13='False', @p14='True', @p15=NULL (DbType = DateTimeOffset), @p16='Ivan Herrera' (Size = 4000), @p17='IVA@GMAIL.COM' (Size = 256), @p18='IVA@GMAIL.COM' (Size = 256), @p19='AQAAAAIAAYagAAAAEO4ASqTjykwIDjr7mBRL2P2CUo4Z2OMKziuoFcegyDqQqR1yX1tauiFvb/HGEEjoHw==' (Size = 4000), @p20='3178531533' (Size = 4000), @p21=NULL (Size = 4000), @p22='False', @p23=NULL (Size = 4000), @p24=NULL (DbType = Int32), @p25='VPADAMZ6FW6ZSKVTFWDFMN3NHUNMPPXJ' (Size = 4000), @p26=NULL (Size = 4000), @p27='False', @p28='2025-11-27T17:25:38.3686219Z' (DbType = DateTime), @p29='iva@gmail.com' (Size = 256), @p30='CREATE' (Size = 100), @p31='2025-11-27T17:25:38.4222147Z' (DbType = DateTime), @p32='Created new User' (Size = 4000), @p33='-2147482645' (Nullable = true), @p34='User' (Size = 100), @p35='127.0.0.1' (Size = 45), @p36='{"Id":-2147482645,"AccessFailedCount":0,"Address":"calle falsa","AvatarUrl":"","City":"Bogot D.C.","ConcurrencyStamp":"a9f62967-850f-4d38-ab83-2de2d0681b23","Country":"Colombia","CreatedAt":"2025-11-27T17:25:38.3686218Z","DocumentNumber":"1096188416","DocumentPhotoUrl":"","DocumentTypeId":1,"Email":"iva@gmail.com","EmailConfirmed":false,"IsActive":false,"IsVerified":false,"LockoutEnabled":true,"LockoutEnd":null,"Name":"Ivan Herrera","NormalizedEmail":"IVA@GMAIL.COM","NormalizedUserName":"IVA@GMAIL.COM","PasswordHash":"AQAAAAIAAYagAAAAEO4ASqTjykwIDjr7mBRL2P2CUo4Z2OMKziuoFcegyDqQqR1yX1tauiFvb/HGEEjoHw==","Phone":"3178531533","PhoneNumber":null,"PhoneNumberConfirmed":false,"PublicDataToken":null,"RoleId":null,"SecurityStamp":"VPADAMZ6FW6ZSKVTFWDFMN3NHUNMPPXJ","Status":null,"TwoFactorEnabled":false,"UpdatedAt":"2025-11-27T17:25:38.3686219Z","UserName":"iva@gmail.com"}' (Size = 4000), @p37='' (Size = 4000), @p38='0HNHDQORIDVB2:00000012' (Size = 50), @p39='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p40=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUsers` (`AccessFailedCount`, `Address`, `AvatarUrl`, `City`, `ConcurrencyStamp`, `Country`, `CreatedAt`, `DocumentNumber`, `document_photo_url`, `DocumentTypeId`, `Email`, `EmailConfirmed`, `IsActive`, `IsVerified`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `Phone`, `PhoneNumber`, `PhoneNumberConfirmed`, `PublicDataToken`, `role_id`, `SecurityStamp`, `Status`, `TwoFactorEnabled`, `UpdatedAt`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
SELECT `Id`
FROM `AspNetUsers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-27 18:25:38.429 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Voia.Api.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-27 18:25:38.437 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType37`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:25:38.438 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 72.684ms
2025-11-27 18:25:38.438 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:25:38.439 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 500 - Duration: 77.0167ms
2025-11-27 18:25:38.441 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 500 null application/json; charset=utf-8 81.0737ms
2025-11-27 18:26:31.421 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:11:31.4206308Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:28:02.207 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:28:02.209 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:28:02.209 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:28:02.210 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:28:02.211 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:28:02.213 +01:00 [INF] CSRF token generado: xc0uRJRF5R...
2025-11-27 18:28:02.213 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:28:02.214 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.129ms
2025-11-27 18:28:02.215 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:28:02.216 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.5569ms
2025-11-27 18:28:02.217 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.2518ms
2025-11-27 18:28:02.222 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:28:02.223 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:28:02.224 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.2144ms
2025-11-27 18:28:02.226 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 408
2025-11-27 18:28:02.227 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:28:02.228 +01:00 [INF] CSRF token validado y consumido: xc0uRJRF5R...
2025-11-27 18:28:02.228 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:28:02.229 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:28:02.230 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:28:02.233 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:28:02.291 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-27 18:28:02.295 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='0', @p1='calle falsa' (Size = 4000), @p2='' (Size = 4000), @p3='Bogot D.C.' (Size = 4000), @p4='ac32b274-854a-48ed-8633-75719b8d1b5f' (Size = 4000), @p5='Colombia' (Size = 4000), @p6='2025-11-27T17:28:02.2356495Z' (DbType = DateTime), @p7='1096188416' (Size = 4000), @p8='' (Size = 4000), @p9='1' (Nullable = true), @p10='iva@gmail.com' (Size = 256), @p11='False', @p12='False', @p13='False', @p14='True', @p15=NULL (DbType = DateTimeOffset), @p16='Ivan Herrera' (Size = 4000), @p17='IVA@GMAIL.COM' (Size = 256), @p18='IVA@GMAIL.COM' (Size = 256), @p19='AQAAAAIAAYagAAAAEFB28k0t8Jl2uKUO+G63LrVF+dWk90N7lcm8e/OL1N2ESiCKRSp3UoFtKsRDAtd2sg==' (Size = 4000), @p20='3178531533' (Size = 4000), @p21=NULL (Size = 4000), @p22='False', @p23=NULL (Size = 4000), @p24=NULL (DbType = Int32), @p25='LXJ6WO6EAWT7LZAP2OF3N46TKNMGZYVX' (Size = 4000), @p26=NULL (Size = 4000), @p27='False', @p28='2025-11-27T17:28:02.2356496Z' (DbType = DateTime), @p29='iva@gmail.com' (Size = 256), @p30='CREATE' (Size = 100), @p31='2025-11-27T17:28:02.2939225Z' (DbType = DateTime), @p32='Created new User' (Size = 4000), @p33='-2147482644' (Nullable = true), @p34='User' (Size = 100), @p35='127.0.0.1' (Size = 45), @p36='{"Id":-2147482644,"AccessFailedCount":0,"Address":"calle falsa","AvatarUrl":"","City":"Bogot D.C.","ConcurrencyStamp":"ac32b274-854a-48ed-8633-75719b8d1b5f","Country":"Colombia","CreatedAt":"2025-11-27T17:28:02.2356495Z","DocumentNumber":"1096188416","DocumentPhotoUrl":"","DocumentTypeId":1,"Email":"iva@gmail.com","EmailConfirmed":false,"IsActive":false,"IsVerified":false,"LockoutEnabled":true,"LockoutEnd":null,"Name":"Ivan Herrera","NormalizedEmail":"IVA@GMAIL.COM","NormalizedUserName":"IVA@GMAIL.COM","PasswordHash":"AQAAAAIAAYagAAAAEFB28k0t8Jl2uKUO+G63LrVF+dWk90N7lcm8e/OL1N2ESiCKRSp3UoFtKsRDAtd2sg==","Phone":"3178531533","PhoneNumber":null,"PhoneNumberConfirmed":false,"PublicDataToken":null,"RoleId":null,"SecurityStamp":"LXJ6WO6EAWT7LZAP2OF3N46TKNMGZYVX","Status":null,"TwoFactorEnabled":false,"UpdatedAt":"2025-11-27T17:28:02.2356496Z","UserName":"iva@gmail.com"}' (Size = 4000), @p37='' (Size = 4000), @p38='0HNHDQORIDVB3:00000003' (Size = 50), @p39='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p40=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUsers` (`AccessFailedCount`, `Address`, `AvatarUrl`, `City`, `ConcurrencyStamp`, `Country`, `CreatedAt`, `DocumentNumber`, `document_photo_url`, `DocumentTypeId`, `Email`, `EmailConfirmed`, `IsActive`, `IsVerified`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `Phone`, `PhoneNumber`, `PhoneNumberConfirmed`, `PublicDataToken`, `role_id`, `SecurityStamp`, `Status`, `TwoFactorEnabled`, `UpdatedAt`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
SELECT `Id`
FROM `AspNetUsers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-27 18:28:02.300 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Voia.Api.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`chatbot_platform`.`aspnetusers`, CONSTRAINT `FK_AspNetUsers_document_types_DocumentTypeId` FOREIGN KEY (`DocumentTypeId`) REFERENCES `document_types` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-27 18:28:02.307 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType37`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:28:02.308 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 76.1456ms
2025-11-27 18:28:02.308 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:28:02.309 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 500 - Duration: 80.6379ms
2025-11-27 18:28:02.310 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 500 null application/json; charset=utf-8 84.4353ms
2025-11-27 18:31:31.434 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:16:31.4335454Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:32:21.758 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:32:21.760 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:32:21.761 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:32:21.761 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:32:21.762 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:32:21.764 +01:00 [INF] CSRF token generado: A/nOnGMr9m...
2025-11-27 18:32:21.765 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:32:21.766 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.3059ms
2025-11-27 18:32:21.767 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:32:21.767 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.9165ms
2025-11-27 18:32:21.769 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.5866ms
2025-11-27 18:32:21.773 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - null null
2025-11-27 18:32:21.774 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:32:21.775 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/register - 204 null null 2.0531ms
2025-11-27 18:32:21.777 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/register - application/json 408
2025-11-27 18:32:21.778 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:32:21.779 +01:00 [INF] CSRF token validado y consumido: A/nOnGMr9m...
2025-11-27 18:32:21.779 +01:00 [INF] HTTP POST /api/Users/register started - IP: 127.0.0.1
2025-11-27 18:32:21.780 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:32:21.781 +01:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Voia.Api.Models.DTOs.CreateUserDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:32:21.784 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-27 18:32:21.840 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='IVA@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-27 18:32:21.845 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0', @p1='calle falsa' (Size = 4000), @p2='' (Size = 4000), @p3='Bogot D.C.' (Size = 4000), @p4='28053dec-f8f6-4e36-ae3e-ebedf79eeb3f' (Size = 4000), @p5='Colombia' (Size = 4000), @p6='2025-11-27T17:32:21.7857870Z' (DbType = DateTime), @p7='1096188416' (Size = 4000), @p8='' (Size = 4000), @p9='1' (Nullable = true), @p10='iva@gmail.com' (Size = 256), @p11='False', @p12='False', @p13='False', @p14='True', @p15=NULL (DbType = DateTimeOffset), @p16='Ivan Herrera' (Size = 4000), @p17='IVA@GMAIL.COM' (Size = 256), @p18='IVA@GMAIL.COM' (Size = 256), @p19='AQAAAAIAAYagAAAAEJI7EZM+urJwa3vjPpP1/Nv/JRMckx+7YmchZrnxVFkGaiNPO/WVJD5keFBPI1g55Q==' (Size = 4000), @p20='3178531533' (Size = 4000), @p21=NULL (Size = 4000), @p22='False', @p23=NULL (Size = 4000), @p24=NULL (DbType = Int32), @p25='UE3KRJJ2PRSASTIGJ5DERKEAKBMZ4ATS' (Size = 4000), @p26=NULL (Size = 4000), @p27='False', @p28='2025-11-27T17:32:21.7857871Z' (DbType = DateTime), @p29='iva@gmail.com' (Size = 256), @p30='CREATE' (Size = 100), @p31='2025-11-27T17:32:21.8427966Z' (DbType = DateTime), @p32='Created new User' (Size = 4000), @p33='-2147482643' (Nullable = true), @p34='User' (Size = 100), @p35='127.0.0.1' (Size = 45), @p36='{"Id":-2147482643,"AccessFailedCount":0,"Address":"calle falsa","AvatarUrl":"","City":"Bogot D.C.","ConcurrencyStamp":"28053dec-f8f6-4e36-ae3e-ebedf79eeb3f","Country":"Colombia","CreatedAt":"2025-11-27T17:32:21.785787Z","DocumentNumber":"1096188416","DocumentPhotoUrl":"","DocumentTypeId":1,"Email":"iva@gmail.com","EmailConfirmed":false,"IsActive":false,"IsVerified":false,"LockoutEnabled":true,"LockoutEnd":null,"Name":"Ivan Herrera","NormalizedEmail":"IVA@GMAIL.COM","NormalizedUserName":"IVA@GMAIL.COM","PasswordHash":"AQAAAAIAAYagAAAAEJI7EZM+urJwa3vjPpP1/Nv/JRMckx+7YmchZrnxVFkGaiNPO/WVJD5keFBPI1g55Q==","Phone":"3178531533","PhoneNumber":null,"PhoneNumberConfirmed":false,"PublicDataToken":null,"RoleId":null,"SecurityStamp":"UE3KRJJ2PRSASTIGJ5DERKEAKBMZ4ATS","Status":null,"TwoFactorEnabled":false,"UpdatedAt":"2025-11-27T17:32:21.7857871Z","UserName":"iva@gmail.com"}' (Size = 4000), @p37='' (Size = 4000), @p38='0HNHDQORIDVB4:00000003' (Size = 50), @p39='Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:145.0) Gecko/20100101 Firefox/145.0' (Size = 500), @p40=NULL (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUsers` (`AccessFailedCount`, `Address`, `AvatarUrl`, `City`, `ConcurrencyStamp`, `Country`, `CreatedAt`, `DocumentNumber`, `document_photo_url`, `DocumentTypeId`, `Email`, `EmailConfirmed`, `IsActive`, `IsVerified`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `Phone`, `PhoneNumber`, `PhoneNumberConfirmed`, `PublicDataToken`, `role_id`, `SecurityStamp`, `Status`, `TwoFactorEnabled`, `UpdatedAt`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
SELECT `Id`
FROM `AspNetUsers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `activity_logs` (`action`, `created_at`, `description`, `entity_id`, `entity_type`, `ip_address`, `new_values`, `old_values`, `request_id`, `user_agent`, `user_id`)
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
SELECT `id`
FROM `activity_logs`
WHERE ROW_COUNT() = 1 AND `id` = LAST_INSERT_ID();
2025-11-27 18:32:21.868 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:32:21.870 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Register (Voia.Api) in 88.4488ms
2025-11-27 18:32:21.871 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Register (Voia.Api)'
2025-11-27 18:32:21.872 +01:00 [INF] HTTP POST /api/Users/register completed - Status: 200 - Duration: 92.5627ms
2025-11-27 18:32:21.873 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/register - 200 null application/json; charset=utf-8 96.41ms
2025-11-27 18:33:18.023 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:33:18.025 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:33:18.026 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:33:18.027 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:33:18.027 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:33:18.029 +01:00 [INF] CSRF token generado: c0eOhfKL9a...
2025-11-27 18:33:18.030 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:33:18.031 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.106ms
2025-11-27 18:33:18.032 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:33:18.032 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.7953ms
2025-11-27 18:33:18.034 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.4545ms
2025-11-27 18:33:18.116 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:33:18.118 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:33:18.118 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.4018ms
2025-11-27 18:33:18.120 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 49
2025-11-27 18:33:18.122 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:33:18.123 +01:00 [INF] CSRF token validado y consumido: c0eOhfKL9a...
2025-11-27 18:33:18.123 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:33:18.124 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:33:18.127 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:33:18.205 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:33:18.221 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:33:18.280 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Name`
FROM `rolepermissions` AS `r`
INNER JOIN `permissions` AS `p` ON `r`.`PermissionId` = `p`.`Id`
WHERE FALSE
2025-11-27 18:33:18.282 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:33:18.283 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 154.8437ms
2025-11-27 18:33:18.284 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:33:18.285 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 161.5433ms
2025-11-27 18:33:18.286 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 165.7501ms
2025-11-27 18:33:26.430 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:33:26.432 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:33:26.432 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:33:26.433 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:33:26.434 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:33:26.436 +01:00 [INF] CSRF token generado: j5UsH6zL5A...
2025-11-27 18:33:26.436 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:33:26.437 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.1502ms
2025-11-27 18:33:26.438 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:33:26.439 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.6517ms
2025-11-27 18:33:26.440 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.3718ms
2025-11-27 18:33:26.444 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:33:26.445 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:33:26.446 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.0875ms
2025-11-27 18:33:26.448 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:33:26.450 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:33:26.451 +01:00 [INF] CSRF token validado y consumido: j5UsH6zL5A...
2025-11-27 18:33:26.451 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:33:26.452 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:33:26.453 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:33:26.456 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:33:26.459 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:33:26.530 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:33:26.532 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 77.5351ms
2025-11-27 18:33:26.532 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:33:26.533 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 81.9244ms
2025-11-27 18:33:26.534 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 85.919ms
2025-11-27 18:36:31.450 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:21:31.4495927Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:40:17.830 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:40:17.832 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:40:17.833 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:40:17.834 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:40:17.835 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:40:17.845 +01:00 [INF] CSRF token generado: Up+CA78Me8...
2025-11-27 18:40:17.846 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:40:17.847 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 11.1905ms
2025-11-27 18:40:17.848 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:40:17.848 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 15.4425ms
2025-11-27 18:40:17.850 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 19.2866ms
2025-11-27 18:40:17.854 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:40:17.856 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:40:17.856 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 1.9825ms
2025-11-27 18:40:17.859 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:40:17.860 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:40:17.861 +01:00 [INF] CSRF token validado y consumido: Up+CA78Me8...
2025-11-27 18:40:17.861 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:40:17.862 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:40:17.863 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:40:17.870 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:40:17.873 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:40:17.923 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:40:17.924 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 60.1549ms
2025-11-27 18:40:17.925 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:40:17.925 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 64.3643ms
2025-11-27 18:40:17.927 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 67.8283ms
2025-11-27 18:40:30.901 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:40:30.903 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:40:30.904 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:40:30.905 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:40:30.906 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:40:30.908 +01:00 [INF] CSRF token generado: KPm/foCvtj...
2025-11-27 18:40:30.909 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:40:30.909 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.2806ms
2025-11-27 18:40:30.910 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:40:30.911 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.0244ms
2025-11-27 18:40:30.912 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.909ms
2025-11-27 18:40:30.917 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:40:30.919 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:40:30.919 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.2101ms
2025-11-27 18:40:30.926 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:40:30.927 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:40:30.928 +01:00 [INF] CSRF token validado y consumido: KPm/foCvtj...
2025-11-27 18:40:30.928 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:40:30.929 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:40:30.930 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:40:30.933 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:40:30.935 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:40:30.988 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:40:30.989 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 57.948ms
2025-11-27 18:40:30.990 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:40:30.991 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 62.1193ms
2025-11-27 18:40:30.992 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 66.2827ms
2025-11-27 18:41:31.465 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:26:31.4645981Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:41:36.599 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:41:36.601 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:41:36.602 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:41:36.603 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:41:36.603 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:41:36.605 +01:00 [INF] CSRF token generado: KT0LJVEj/W...
2025-11-27 18:41:36.606 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:41:36.607 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.2922ms
2025-11-27 18:41:36.608 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:41:36.609 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.7542ms
2025-11-27 18:41:36.610 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.4059ms
2025-11-27 18:41:36.614 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:41:36.615 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:41:36.616 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.1486ms
2025-11-27 18:41:36.618 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:41:36.620 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:41:36.620 +01:00 [INF] CSRF token validado y consumido: KT0LJVEj/W...
2025-11-27 18:41:36.621 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:41:36.622 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:41:36.622 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:41:36.626 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:41:36.628 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:41:36.685 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:41:36.686 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 62.1777ms
2025-11-27 18:41:36.687 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:41:36.688 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 66.9295ms
2025-11-27 18:41:36.689 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 70.5582ms
2025-11-27 18:44:12.598 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:44:12.600 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:44:12.601 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:44:12.602 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:44:12.603 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:44:12.605 +01:00 [INF] CSRF token generado: Ng0VBnWr0e...
2025-11-27 18:44:12.606 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:44:12.607 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.8044ms
2025-11-27 18:44:12.608 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:44:12.608 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.5039ms
2025-11-27 18:44:12.609 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 11.1952ms
2025-11-27 18:44:12.614 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:44:12.615 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:44:12.616 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 1.96ms
2025-11-27 18:44:12.618 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:44:12.619 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:44:12.620 +01:00 [INF] CSRF token validado y consumido: Ng0VBnWr0e...
2025-11-27 18:44:12.620 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:44:12.621 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:44:12.622 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:44:12.625 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:44:12.627 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:44:12.687 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:44:12.688 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 65.0004ms
2025-11-27 18:44:12.689 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:44:12.689 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 69.3883ms
2025-11-27 18:44:12.691 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 73.017ms
2025-11-27 18:46:31.470 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:31:31.4686174Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:49:40.558 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:49:40.560 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:49:40.560 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:49:40.561 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:49:40.562 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:49:40.564 +01:00 [INF] CSRF token generado: f2YPZXPWD6...
2025-11-27 18:49:40.564 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:49:40.565 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.0926ms
2025-11-27 18:49:40.566 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:49:40.567 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 6.7992ms
2025-11-27 18:49:40.568 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.609ms
2025-11-27 18:49:40.574 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:49:40.576 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:49:40.577 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.4888ms
2025-11-27 18:49:40.579 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:49:40.580 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:49:40.581 +01:00 [INF] CSRF token validado y consumido: f2YPZXPWD6...
2025-11-27 18:49:40.581 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:49:40.582 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:49:40.583 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:49:40.586 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:49:40.596 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:49:40.651 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:49:40.652 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 68.0261ms
2025-11-27 18:49:40.653 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:49:40.654 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 72.876ms
2025-11-27 18:49:40.655 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 76.5946ms
2025-11-27 18:51:31.476 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__inactivityThreshold_0='2025-11-27T17:36:31.4756273Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`active_mobile_session`, `c`.`blocked`, `c`.`bot_id`, `c`.`bot_response`, `c`.`closed_at`, `c`.`created_at`, `c`.`expires_at`, `c`.`is_with_ai`, `c`.`last_active_at`, `c`.`last_message`, `c`.`mobile_device_type`, `c`.`mobile_joined_at`, `c`.`public_user_id`, `c`.`status`, `c`.`Title`, `c`.`updated_at`, `c`.`user_id`, `c`.`user_message`
FROM `Conversations` AS `c`
WHERE (`c`.`status` = 'activa') AND (`c`.`last_active_at` < @__inactivityThreshold_0)
2025-11-27 18:51:52.023 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:51:52.024 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:51:52.025 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:51:52.026 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:51:52.027 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:51:52.028 +01:00 [INF] CSRF token generado: OR3Au423HY...
2025-11-27 18:51:52.029 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:51:52.030 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.1827ms
2025-11-27 18:51:52.031 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:51:52.032 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.0609ms
2025-11-27 18:51:52.033 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 10.4768ms
2025-11-27 18:51:52.038 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:51:52.039 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:51:52.040 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.0416ms
2025-11-27 18:51:52.042 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 47
2025-11-27 18:51:52.043 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:51:52.044 +01:00 [INF] CSRF token validado y consumido: OR3Au423HY...
2025-11-27 18:51:52.044 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:51:52.045 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:51:52.046 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:51:52.049 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:51:52.052 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:51:52.115 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType19`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:51:52.117 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 69.1124ms
2025-11-27 18:51:52.117 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:51:52.118 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 401 - Duration: 73.9367ms
2025-11-27 18:51:52.119 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 401 null application/json; charset=utf-8 77.7932ms
2025-11-27 18:53:16.062 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - null null
2025-11-27 18:53:16.064 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:16.064 +01:00 [INF] HTTP GET /api/Auth/csrf-token started - IP: 127.0.0.1
2025-11-27 18:53:16.065 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:53:16.066 +01:00 [INF] Route matched with {action = "GetCsrfToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCsrfToken() on controller Voia.Api.Controllers.AuthController (Voia.Api).
2025-11-27 18:53:16.068 +01:00 [INF] CSRF token generado: /3PcJjvrN5...
2025-11-27 18:53:16.069 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-27 18:53:16.070 +01:00 [INF] Executed action Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api) in 2.4256ms
2025-11-27 18:53:16.071 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.AuthController.GetCsrfToken (Voia.Api)'
2025-11-27 18:53:16.072 +01:00 [INF] HTTP GET /api/Auth/csrf-token completed - Status: 200 - Duration: 7.3407ms
2025-11-27 18:53:16.073 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Auth/csrf-token - 200 null application/json; charset=utf-8 11.1903ms
2025-11-27 18:53:16.249 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - null null
2025-11-27 18:53:16.251 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:16.251 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/login - 204 null null 2.2988ms
2025-11-27 18:53:16.253 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5006/api/Users/login - application/json 49
2025-11-27 18:53:16.255 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:16.255 +01:00 [INF] CSRF token validado y consumido: /3PcJjvrN5...
2025-11-27 18:53:16.256 +01:00 [INF] HTTP POST /api/Users/login started - IP: 127.0.0.1
2025-11-27 18:53:16.257 +01:00 [INF] Executing endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:53:16.257 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Voia.Api.Models.DTOs.LoginDto) on controller Voia.Api.Controllers.UsersController (Voia.Api).
2025-11-27 18:53:16.261 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`Address`, `a`.`AvatarUrl`, `a`.`City`, `a`.`ConcurrencyStamp`, `a`.`Country`, `a`.`CreatedAt`, `a`.`DocumentNumber`, `a`.`document_photo_url`, `a`.`DocumentTypeId`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`IsActive`, `a`.`IsVerified`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`Name`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`Phone`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`PublicDataToken`, `a`.`role_id`, `a`.`SecurityStamp`, `a`.`Status`, `a`.`TwoFactorEnabled`, `a`.`UpdatedAt`, `a`.`UserName`, `a0`.`Id`, `a0`.`ConcurrencyStamp`, `a0`.`Description`, `a0`.`Name`, `a0`.`NormalizedName`
FROM `AspNetUsers` AS `a`
LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
WHERE `a`.`Email` = @__loginDto_Email_0
ORDER BY `a`.`Id`, `a0`.`Id`
LIMIT 1
2025-11-27 18:53:16.263 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='iva@gmail.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`expires_at`, `t0`.`plan_id`, `t0`.`started_at`, `t0`.`Status`, `t0`.`user_id`, `t0`.`Id0`, `t0`.`ai_providers`, `t0`.`analytics_dashboard`, `t0`.`bots_limit`, `t0`.`created_at`, `t0`.`custom_styles`, `t0`.`data_capture_limit`, `t0`.`Description`, `t0`.`file_upload_limit`, `t0`.`integration_api`, `t0`.`is_active`, `t0`.`max_tokens`, `t0`.`Name`, `t0`.`Price`, `t0`.`priority_support`, `t0`.`updated_at`, `t`.`Id`, `t`.`Id0`
FROM (
    SELECT `a`.`Id`, `a0`.`Id` AS `Id0`
    FROM `AspNetUsers` AS `a`
    LEFT JOIN `AspNetRoles` AS `a0` ON `a`.`role_id` = `a0`.`Id`
    WHERE `a`.`Email` = @__loginDto_Email_0
    LIMIT 1
) AS `t`
INNER JOIN (
    SELECT `s`.`Id`, `s`.`expires_at`, `s`.`plan_id`, `s`.`started_at`, `s`.`Status`, `s`.`user_id`, `p`.`Id` AS `Id0`, `p`.`ai_providers`, `p`.`analytics_dashboard`, `p`.`bots_limit`, `p`.`created_at`, `p`.`custom_styles`, `p`.`data_capture_limit`, `p`.`Description`, `p`.`file_upload_limit`, `p`.`integration_api`, `p`.`is_active`, `p`.`max_tokens`, `p`.`Name`, `p`.`Price`, `p`.`priority_support`, `p`.`updated_at`
    FROM `Subscriptions` AS `s`
    INNER JOIN `Plans` AS `p` ON `s`.`plan_id` = `p`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`user_id`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-11-27 18:53:16.331 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_RoleId_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Name`
FROM `rolepermissions` AS `r`
INNER JOIN `permissions` AS `p` ON `r`.`PermissionId` = `p`.`Id`
WHERE `r`.`RoleId` = @__user_RoleId_0
2025-11-27 18:53:16.345 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType118`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType119`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType120`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType120`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], Voia.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-27 18:53:16.349 +01:00 [INF] Executed action Voia.Api.Controllers.UsersController.Login (Voia.Api) in 89.9965ms
2025-11-27 18:53:16.350 +01:00 [INF] Executed endpoint 'Voia.Api.Controllers.UsersController.Login (Voia.Api)'
2025-11-27 18:53:16.350 +01:00 [INF] HTTP POST /api/Users/login completed - Status: 200 - Duration: 94.4728ms
2025-11-27 18:53:16.351 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5006/api/Users/login - 200 null application/json; charset=utf-8 98.2013ms
2025-11-27 18:53:26.182 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/users/me - null null
2025-11-27 18:53:26.184 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:26.184 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/users/me - 204 null null 2.1231ms
2025-11-27 18:53:26.187 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/users/me - application/json null
2025-11-27 18:53:26.189 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:26.189 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5006/api/Users/me - null null
2025-11-27 18:53:26.191 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:26.192 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5006/api/Users/me - 204 null null 3.002ms
2025-11-27 18:53:26.198 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5006/api/Users/me - null null
2025-11-27 18:53:26.200 +01:00 [INF] CORS policy execution successful.
2025-11-27 18:53:26.216 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|User|Support|Trainer|Viewer)
2025-11-27 18:53:26.216 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|User|Support|Trainer|Viewer)
2025-11-27 18:53:26.218 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-11-27 18:53:26.218 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-11-27 18:53:26.218 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/users/me - 403 0 null 31.6417ms
2025-11-27 18:53:26.219 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5006/api/Users/me - 403 0 null 20.7786ms
